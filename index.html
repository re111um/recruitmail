<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Featuring Recruit 메일 서식</title>
  <style>
    :root{
      --bg:#fafafa;
      --card:#ffffff;
      --ink:#111111;
      --muted:#6b7280;
      --line:#e5e7eb;
      --accent:#6d28d9;
      --accent-ink:#ffffff;
      --radius:16px;
      --control-h: 44px;          /* 입력창 시각 높이(체크박스 중앙 정렬 기준) */
}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; padding:24px; background:var(--bg); color:var(--ink);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, Helvetica, "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", sans-serif;
      line-height:1.5;
    }
    .container{
      max-width:1100px; margin:0 auto; background:var(--card);
      border:1px solid var(--line); border-radius:24px; padding:28px 28px 32px;
      box-shadow:0 10px 30px rgba(0,0,0,.03);
    }
    h1{margin:0 0 6px; font-size:32px; letter-spacing:-.02em}
  /* 기본 3열(grid 활성화) */
  .grid{display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:14px}

    }
    
    .field .label-row{ display:flex; align-items:center; justify-content:space-between; }
    .field .intern{ display:flex; align-items:center; gap:6px; font-weight:600; }

    /* 체크박스 크기 고정 (13×13) */
    #isIntern{ width:13px; height:13px; }
    
    label{display:block; font-weight:600; margin:0 0 6px}
    .field input{
      width:100%; padding:14px 12px; border:1px solid var(--line); border-radius:12px;
      outline:none; background:#fff; font-size:15px; color:var(--ink);
    }
    .field input:focus{border-color:var(--accent); box-shadow:0 0 0 4px rgba(109,40,217,.12)}

    .btn-row{display:flex; gap:10px; flex-wrap:wrap; margin:16px 0 8px}
    .btn{appearance:none; border:1px solid var(--line); background:#fff; color:var(--ink);
      padding:12px 14px; border-radius:999px; cursor:pointer; font-weight:600; font-size:14px;
      transition:all .15s ease; box-shadow:0 2px 0 rgba(17,17,17,.04);
    }
    .btn:hover{transform:translateY(-1px); box-shadow:0 6px 14px rgba(17,17,17,.06)}
    .btn.primary{background:var(--accent); color:var(--accent-ink); border-color:transparent} /* ★ 복구 */
    .btn.black{background:#111111; color:#ffffff; border-color:#111111}
    .btn[disabled]{opacity:.55; cursor:not-allowed; transform:none; box-shadow:none}

    .actions{display:flex; gap:10px; align-items:center; margin:10px 0 8px}
    .hint{color:var(--muted); font-size:13px}

    .preview{
      margin-top:8px; padding:18px; border-radius:16px; background:#fff;
      border:2px dashed var(--line);
    }
    .preview h3{margin:0 0 10px; font-size:16px}
    .preview .frame{background:#fff; border:1px solid var(--line); border-radius:12px; padding:18px}

    .toast{position:fixed; right:16px; bottom:16px; background:#111; color:#fff; border-radius:12px; padding:12px 14px; opacity:0; transform:translateY(8px); transition:all .2s ease}
    .toast.show{opacity:1; transform:translateY(0)}

    .hr{height:1px; background:var(--line); margin:18px 0}

/* 체크박스는 텍스트 입력 스타일을 덮어쓰기(13×13) */
.field.compact input[type="checkbox"]{
  width:13px; height:13px; padding:0; margin:0;
  border:none; border-radius:0; box-shadow:none; outline:none;
}
    
  .grid{ display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:14px; }
    /* 데스크톱에서도 3열 유지 (이전에 넣었던 4열 규칙은 삭제!) */
  @media (min-width:901px){
    .grid{ display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:14px; }
    /* 인턴십 칸: 라벨과 체크박스를 한 줄로, 높이는 입력창과 맞추고 세로 중앙 정렬 */
    .field.small{ display:flex; align-items:center; gap:8px; min-height:44px; }
    .field.small label{ margin:0; font-weight:600; }

/* 체크박스 고정 크기 */
  #isIntern{ width:13px; height:13px; }
}
  </style>
</head>
<body>
  <div class="container">
    <h1>Featuring Recruit 메일 서식</h1>
    <p class="sub">아래 3가지만 입력한 뒤, 원하는 단계 버튼을 누르세요. 하단 미리보기에서 <strong>서식 복사</strong>를 클릭하면 Gmail 본문(HTML)으로 그대로 붙여넣을 수 있습니다.</p>

<div class="grid">
  <!-- 1행: 이름 / 포지션 / 과제 URL (3열) -->
  <div class="field">
    <label for="name">지원자명</label>
    <input id="name" type="text" placeholder="예: 홍길동" />
  </div>
  <div class="field">
    <label for="position">포지션명</label>
    <input id="position" type="text" placeholder="예: HR Manager" />
  </div>
  <div class="field">
    <label for="taskurl">과제 URL (선택)</label>
    <input id="taskurl" type="url" placeholder="예: https://..." />
  </div>

  <!-- 2행: 왼쪽 1칸에 인턴십만 표시 -->
  <div class="field small">
    <label for="isIntern">인턴십</label>
    <input id="isIntern" type="checkbox" />
  </div>
</div>
    
    <div class="btn-row" aria-label="단계 버튼">
      <button class="btn js-template" data-key="task">과제전형</button>
      <button class="btn js-template" data-key="interview1">1차 인터뷰</button>
      <button class="btn js-template" data-key="scheduleConfirm">일정 확정</button>
      <button class="btn js-template" data-key="reference">레퍼런스 체크</button>
      <button class="btn js-template" data-key="offer">처우협의 및 오퍼레터</button>
      <button class="btn js-template" data-key="onboarding">입사 안내</button>
      <button class="btn black js-template" data-key="reject">불합격</button>
    </div>

    <div class="actions">
      <button id="copyBtn" class="btn primary" disabled>서식 복사</button>
      <button id="copySubjectBtn" class="btn" disabled>제목 복사</button>
      <span id="subjectPreview" class="hint" aria-live="polite"></span>
    </div>

    <div class="preview">
      <h3>미리보기</h3>
      <div id="preview" class="frame" aria-live="polite">아직 선택된 서식이 없습니다.</div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite">클립보드에 복사했습니다.</div>

  <script>
    // ---------- 템플릿 구성 ----------
    // 실제 본문은 Gmail에서 안전하게 보이도록 모든 스타일을 인라인으로 구성합니다.

    const brandLinkStyle = "color:#111111; text-decoration:underline;"; // 링크도 진한 검정(요청사항)으로 설정

    function getHeaderImageSrc(){
      try { return new URL('assets/process.png', window.location.href).href; } catch(e) { return 'assets/process.png'; }
    }

function wrapEmail(contentHtml){
  const header = '<div style="margin:0 0 20px 0; text-align:left;"><img src="' + getHeaderImageSrc() + '" width="760" height="98" alt="Featuring Recruit" style="display:block;margin:0;width:760px;height:98px;border:0;"/></div>';

  // “감사합니다. … 채용팀 드림.” 문단 바로 앞에 이미지 삽입
  const signoffRe = new RegExp('<p[^>]*>\\s*감사합니다\\.[\\s\\S]*?채용팀\\s*드림\\.?\\s*<\\/p>', 'i');
  const injected = signoffRe.test(contentHtml)
    ? contentHtml.replace(signoffRe, header + '$&')
    : (header + contentHtml); // 혹시 문구를 못 찾으면 상단에 삽입(폴백)

  return (
    '<div style="font-family:Arial, Helvetica, \"Apple SD Gothic Neo\", \"Noto Sans KR\", \"Malgun Gothic\", sans-serif; font-size:14px; color:#111111; line-height:1.7;">' +
      '<div style="padding:8px 0 16px 0">' + injected + '</div>' +
    '</div>'
  );
}

function wrapEmailNoHeader(contentHtml){
  return (
    '<div style="font-family:Arial, Helvetica, \"Apple SD Gothic Neo\", \"Noto Sans KR\", \"Malgun Gothic\", sans-serif; font-size:14px; color:#111111; line-height:1.7;">' +
      '<div style="padding:8px 0 16px 0">' + contentHtml + '</div>' +
    '</div>'
  );
}

// ★ 선언 복구
function escapeHtml(s){
  return s.replace(/[&<>"]/g, function(tag){
    const chars = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;' };
    return chars[tag] || tag;
  });
}

    // 포지션명(HTML 본문용) — 인턴십이면 " (인턴십)" 꼬리표 추가 + HTML 이스케이프
function roleHtml(v){
  const p = (v.position || '').trim();
  return escapeHtml(p) + (v.isIntern ? ' (인턴십)' : '');
}

// 포지션명(메일 제목용) — HTML 이스케이프 불필요
function subjectRole(v){
  const p = (v.position || '').trim();
  return p + (v.isIntern ? ' (인턴십)' : '');
}

    // 기본 플레이스홀더 템플릿: 실제 문안은 이후 제공되는 내용으로 손쉽게 바꿀 수 있게 함수 분리

    const templates = {
     task: (v) => { const role = roleHtml(v); return wrapEmail(`
        <p style="margin:0 0 3px 0;"><strong>[Featuring]</strong></p>
        <p style="margin:0 0 3px 0;">안녕하세요. ${escapeHtml(v.name)}님. :)</p>
        <p style="margin:0 0 14px 0;">피처링 채용팀입니다.</p>

        <p style="margin:0 0 3px 0;">먼저 당사와 ${role} 포지션에 관심 가져주시고 지원해주셔서 감사합니다.</p>
        <p style="margin:0 0 14px 0;">과제는 실제 업무와 유사한 상황을 기반으로 구성되어 있습니다. 목표는 아키텍처 설계 및 기술적 의사결정 능력을 평가하기 위함입니다.</p>

        <p style="margin:0 0 3px 0;"><strong>[과제 전형 안내]</strong></p>
        <p style="margin:0 3px 3px 0;">✅ <strong>과제 주제</strong> : 소셜 미디어 데이터 파이프라인 시스템 설계</p>
        ${v.taskurl ? `<p style="margin:0 3px 3px 0;">✅ <strong>과제 링크</strong> : <a href="${v.taskurl}" style="${brandLinkStyle}"><span style="color:#3d85c6">URL</span></a></p>` : ''}

        <p style="margin:3px 0 3px 0;">✅ <strong>제출 형식</strong> :</p>
        <ul style="margin:0 0 3px 18px; padding:0;">
        <li>구성을 한눈에 볼 수 있는 도식(Flowchart, Architecture Diagram 등)을 포함해주세요.</li>
        <li>데이터 관리부터 비즈니스 로직 구현 단계까지, 각 과정에서 고려해야 할 요소(성능, 확장성, 보안, 비용 효율성, 모니터링 등)에 대해 파이프라인을 기술해주시기 바랍니다.</li>
        <li>문서 형식은 PPT, PDF, Markdown 등 자유롭게 선택하시면 됩니다.</li>
  </ul>

        <p style="margin:3px 0 3px 0;">✅ <strong>마감 기한</strong> :</p>
        <ul style="margin:0 0 14px 18px; padding:0;">
        <li><strong>금일 자정(yyyy-mm-dd 11:59)전 까지</strong> 회신 부탁드립니다.</li>
        <li>해당 메일에 [전체 답장] 또는 recruit@featuring.in으로 제출해주시면 됩니다.</li>
  </ul>

        <p style="margin:0 0 3px 0;">제출하신 과제는 내부 기술 리드 및 개발팀과 함께 검토할 예정이며, 결과는 제출일로부터 영업일 기준 3일 전까지 안내 드리겠습니다.</p>
        <p style="margin:0 0 3px 0;">과제 진행 중 궁금하신 사항이 있거나 제출 기한에 어려움이 있으실 경우, 언제든 편하게 해당 메일로 연락 부탁드립니다. :)</p>

        <p style="margin:0 0 14px 0; color:#b91c1c; font-style:italic; font-size:12px;">
        (*해당 과제는 피처링의 자산이므로 외부 및 제3자 유출 시 채용 과정이 취소되며, 별도의 조치 될 수 있음을 사전에 안내드립니다.)
        </p>

        <p style="margin:0;">감사합니다.<br />피처링 채용팀 드림.</p>
`),
interview1: (v) => wrapEmail(`
  <p style="margin:0 0 14px 0;">안녕하세요, ${escapeHtml(v.name)}님.</p>
  <p style="margin:0 0 14px 0;"><strong>1차 인터뷰</strong> 관련 안내 드립니다. (세부 문안은 추후 교체)</p>
  <p style="margin:0;">감사합니다.<br />featuring 채용팀 드림</p>
`),

interviewFinal: (v) => wrapEmail(`
  <p style="margin:0 0 14px 0;">안녕하세요, ${escapeHtml(v.name)}님.</p>
  <p style="margin:0 0 14px 0;"><strong>최종 인터뷰</strong> 관련 안내 드립니다. (세부 문안은 추후 교체)</p>
  <p style="margin:0;">감사합니다.<br />featuring 채용팀 드림</p>
`),

scheduleConfirm: (v) => { const role = roleHtml(v); return wrapEmail(`
  <p style="margin:0 0 14px 0;">안녕하세요, ${escapeHtml(v.name)}님.</p>
  <p style="margin:0 0 14px 0;">${role} 포지션 <strong>일정 확정</strong> 관련 안내 드립니다. (세부 문안은 추후 교체)</p>
  <p style="margin:0;">감사합니다.<br />featuring 채용팀 드림</p>
`); },  // ★ 함수/속성 정확히 닫기

reference: (v) => wrapEmail(`
  <p style="margin:0 0 14px 0;">안녕하세요, ${escapeHtml(v.name)}님.</p>
  <p style="margin:0 0 14px 0;"><strong>레퍼런스 체크</strong> 단계 안내 드립니다. (세부 문안은 추후 교체)</p>
  <p style="margin:0;">감사합니다.<br />featuring 채용팀 드림</p>
`),

onboarding: (v) => { const role = roleHtml(v); return wrapEmail(`
  <p style="margin:0 0 14px 0;">안녕하세요. ${escapeHtml(v.name)}님.</p>
  <p style="margin:0 0 14px 0;">피처링 채용팀입니다. ${role} 포지션 <strong>입사 안내</strong> 드립니다.</p>
  ...
  <p style="margin:0;">감사합니다.<br />피처링 채용팀 드림.</p>
`); },  // ★ 함수/속성 정확히 닫기
      
reject: (v) => wrapEmailNoHeader(`
  <p style="margin:0 0 14px 0;">안녕하세요, ${escapeHtml(v.name)}님.</p>
  <p style="margin:0 0 14px 0;">아쉽게도 이번 ${roleHtml(v)} 포지션 채용 전형에서는 함께하지 못하게 되었습니다. 소중한 시간 내어 지원해 주셔서 진심으로 감사드립니다.</p>
  <p style="margin:0;">감사합니다.<br />featuring 채용팀 드림</p>
`),

finalNotice: (v) => wrapEmail(`
  <p style="margin:0 0 14px 0;">안녕하세요, ${escapeHtml(v.name)}님.</p>
  <p style="margin:0 0 14px 0;"><strong>최종 안내</strong> 관련 문구가 여기에 표시됩니다. (세부 문안은 추후 교체)</p>
  <p style="margin:0;">감사합니다.<br />featuring 채용팀 드림</p>
`)
};
    
    const subjectTemplates = {
    task: (v) => `[Featuring] ${subjectRole(v)} 과제 전형 진행 안내드립니다`,
    interview1: (v) => `[Featuring] ${subjectRole(v)} 1차 인터뷰 안내`,
    interviewFinal: (v) => `[Featuring] ${subjectRole(v)} 최종 인터뷰 안내`,
    scheduleConfirm: (v) => `[Featuring] ${subjectRole(v)} 일정 확정 안내`,
    reference: (v) => `[Featuring] ${subjectRole(v)} 레퍼런스 체크 안내`,
    offer: (v) => `[Featuring] ${subjectRole(v)} 처우협의 및 오퍼레터 안내`,
    onboarding: (v) => `[Featuring] ${subjectRole(v)} 입사 안내`,
    finalNotice: (v) => `[Featuring] ${subjectRole(v)} 최종 안내`,
    reject: (v) => `[Featuring] ${subjectRole(v)} 채용 전형 결과 안내`
};

    const nameEl = document.getElementById('name');
    const positionEl = document.getElementById('position');
    const taskurlEl = document.getElementById('taskurl');
    const previewEl = document.getElementById('preview');
    const copyBtn = document.getElementById('copyBtn');
    const toast = document.getElementById('toast');
    const isInternEl = document.getElementById('isIntern');
    const copySubjectBtn = document.getElementById('copySubjectBtn');     // ★ 추가
    const subjectPreviewEl = document.getElementById('subjectPreview');   // ★ 추가

    let currentHtml = '';
    let currentSubject = ''; // ★ 추가

    function buildVars(){
      return {
        name: (nameEl.value || '').trim() || '지원자',
        position: (positionEl.value || '').trim() || '포지션',
        taskurl: (taskurlEl.value || '').trim(),
        isIntern: !!(isInternEl && isInternEl.checked)
      };
    }

    function showPreview(html){
      currentHtml = html;
      previewEl.innerHTML = html;
      copyBtn.disabled = !html;
    }

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 1700);
    }

function renderTemplateByKey(key){
  const builder = templates[key];
  if(!builder){
    showPreview('<p style="margin:0">선택한 서식이 아직 준비되지 않았습니다.</p>');
    currentSubject = '';
    copySubjectBtn.disabled = true;
    subjectPreviewEl.textContent = '';
    return;
  }
  try{
    const vars = buildVars();
    const html = builder(vars);
    showPreview(html);

    // ★ 제목 계산 및 미리보기/버튼 상태 갱신
    const sb = subjectTemplates[key];
    currentSubject = sb ? sb(vars) : `[Featuring] ${vars.position}`;
    subjectPreviewEl.textContent = currentSubject;
    copySubjectBtn.disabled = !currentSubject;

  }catch(err){
    console.error('[템플릿 렌더 오류]', err);
    showPreview('<p style="margin:0;color:#b91c1c">서식을 표시하는 중 오류가 발생했습니다.</p>');
    currentSubject = '';
    copySubjectBtn.disabled = true;
    subjectPreviewEl.textContent = '';
  }
}

    document.querySelectorAll('.js-template').forEach(btn =>{
      btn.addEventListener('click', ()=> renderTemplateByKey(btn.dataset.key));
    });

    async function copyHtml(){
      if(!currentHtml) return;
      const blob = new Blob([currentHtml], {type: 'text/html'});
      const item = new ClipboardItem({'text/html': blob});
      try{
        await navigator.clipboard.write([item]);
        showToast('클립보드에 복사했습니다. Gmail 작성창에 붙여넣기(Ctrl/⌘+V) 하세요.');
      }catch(err){
        // 퍼미션이 막힌 브라우저 대비 텍스트로 폴백
        const ta = document.createElement('textarea');
        ta.value = currentHtml; document.body.appendChild(ta); ta.select();
        try{ document.execCommand('copy'); showToast('HTML 복사 권한이 없어 텍스트로 복사했습니다.'); }
        catch(e){ alert('복사에 실패했습니다.'); }
        finally{ document.body.removeChild(ta); }
      }
    }

    copyBtn.addEventListener('click', copyHtml);
    async function copySubject(){
  if(!currentSubject) return;
  try{
    await navigator.clipboard.writeText(currentSubject);
    showToast('제목을 복사했습니다. 메일 제목 입력란에 붙여넣기(Ctrl/⌘+V) 하세요.');
  }catch(err){
    // 권한 이슈 시 폴백
    const ta = document.createElement('textarea');
    ta.value = currentSubject; document.body.appendChild(ta); ta.select();
    try{ document.execCommand('copy'); showToast('제목을 텍스트로 복사했습니다.'); }
    catch(e){ alert('제목 복사에 실패했습니다.'); }
    finally{ document.body.removeChild(ta); }
  }
}
copySubjectBtn.addEventListener('click', copySubject);
  </script>
</body>
</html>
