<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Featuring Recruit ë©”ì¼ ì„œì‹</title>
  <link rel="icon" href="/recruitmail/assets/favicon.ico?v=2" sizes="any">
  <link rel="icon" type="image/png" href="/recruitmail/assets/favicon-32.png?v=2" sizes="32x32">
  <link rel="apple-touch-icon" href="/recruitmail/assets/apple-touch-icon.png?v=2">

  <style>
    :root{
      --bg:#fafafa;
      --card:#ffffff;
      --ink:#111111;
      --muted:#6b7280;
      --line:#e5e7eb;
      --accent:#5E51FF;
      --accent-ink:#ffffff;
      --radius:16px;
      --control-h:44px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; padding:24px; background:var(--bg); color:var(--ink);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,Helvetica,"Apple SD Gothic Neo","Noto Sans KR","Malgun Gothic",sans-serif;
      line-height:1.5;
    }
    .container{
      max-width:1100px; margin:0 auto; background:var(--card);
      border:1px solid var(--line); border-radius:24px; padding:28px 28px 32px;
      box-shadow:0 10px 30px rgba(0,0,0,.03);
    }
    h1{margin:0 0 6px; font-size:32px; letter-spacing:-.02em}

    /* 1í–‰: ê¸°ë³¸ 3ì—´ */
    .grid{display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:14px}

    label{display:block; font-weight:600; margin:0 0 6px}
    .field input{
      width:100%; padding:14px 12px; border:1px solid var(--line); border-radius:12px;
      outline:none; background:#fff; font-size:15px; color:var(--ink);
    }
    .field input:focus{border-color:var(--accent); box-shadow:0 0 0 4px rgba(109,40,217,.12)}

    .field textarea{
  width:100%;
  padding:14px 12px;
  border:1px solid var(--line);
  border-radius:12px;
  outline:none;
  background:#fff;
  font-size:15px;
  color:var(--ink);
  resize:vertical;
  min-height:120px;
}
.field textarea:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 4px rgba(109,40,217,.12);
}

    .btn-row{display:flex; gap:10px; flex-wrap:wrap; margin:16px 0 8px}
    .btn{appearance:none; border:1px solid var(--line); background:#fff; color:var(--ink);
      padding:12px 14px; border-radius:999px; cursor:pointer; font-weight:600; font-size:14px;
      transition:all .15s ease; box-shadow:0 2px 0 rgba(17,17,17,.04);
    }
    .btn:hover{transform:translateY(-1px); box-shadow:0 6px 14px rgba(17,17,17,.06)}
    .btn.primary{background:var(--accent); color:var(--accent-ink); border-color:transparent}
    .btn.black{background:#111111; color:#ffffff; border-color:#111111}
    .btn[disabled]{opacity:.55; cursor:not-allowed; transform:none; box-shadow:none}

    .actions{display:flex; gap:10px; align-items:center; margin:10px 0 8px}
    .hint{color:var(--muted); font-size:13px}

    .preview{
      margin-top:8px; padding:18px; border-radius:16px; background:#fff;
      border:2px dashed var(--line);
    }
    .preview h3{margin:0 0 10px; font-size:16px}
    .preview .frame{background:#fff; border:1px solid var(--line); border-radius:12px; padding:18px}

    /* ì¤‘ì•™ í† ìŠ¤íŠ¸ */
    .toast{
      position:fixed; top:50%; left:50%;
      transform:translate(-50%,-40%) scale(.98);
      background:#111; color:#fff; border-radius:12px;
      padding:14px 18px; opacity:0; transition:all .2s ease;
      text-align:center; z-index:9999; box-shadow:0 10px 30px rgba(0,0,0,.25);
      max-width:86vw;
      visibility:hidden;
      pointer-events:none;
    }
    .toast.show{opacity:1; transform:translate(-50%,-50%) scale(1)
               visibility:visible;}
    .toast .note{margin-top:8px; font-size:12px; color:#d1d5db; line-height:1.4}

    .hr{height:1px; background:var(--line); margin:18px 0}

    /* ë‚ ì§œ ì…ë ¥ 2ì—´ */
    .grid.dates{
      display:grid; grid-template-columns:1fr 1fr; gap:18px;
      align-items:start; margin:8px 0 0px;
    }
    .datebox{display:block; border:1px solid var(--line); border-radius:12px; padding:10px; background:#fff;}
    .date-row{display:flex; align-items:center; gap:6px; padding:6px 8px; border-radius:8px;}
    .date-row + .date-row{margin-top:8px; background:#fafafa;}
    .date-row input, .date-row select{
      border:1px solid var(--line); border-radius:10px; padding:8px 10px; font-size:14px;
    }
    .date-row input:focus, .date-row select:focus{
      outline:none; border-color:var(--accent); box-shadow:0 0 0 3px rgba(109,40,217,.12);
    }
    .date-row .y{width:86px; text-align:center;}
    .date-row .m,.date-row .d{width:56px; text-align:center;}
    .date-row .h,.date-row .i{width:56px; text-align:center;}
    .date-row .w{min-width:84px;}
    .date-row .sep,.date-row .colon{color:#6b7280;}

    @media (max-width:900px){
      .grid.dates{grid-template-columns:1fr;}
    }


.dates-after{
  display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-top:14px;
}
.dates-after .intern-field{
  grid-column:2; display:flex; align-items:center; gap:8px;
}
.dates-after .intern-field .intern-label{
  display:inline-flex; align-items:center;
  margin:0; font-weight:600;
}
#isIntern{ width:13px; height:13px; }


@media (max-width:900px){
  .dates-after{ grid-template-columns:1fr; }
  .dates-after .intern-field{ grid-column:1; }
}

    /* ================================================= */
/* â–¼â–¼â–¼ 'ì¸í„´ì‹­' ì²´í¬ë°•ìŠ¤ ë ˆì´ì•„ì›ƒ ì¡°ì •ì„ ìœ„í•´ ì´ ì½”ë“œë¥¼ ì¶”ê°€ â–¼â–¼â–¼ */
/* ================================================= */

/* 'ì¸í„´ì‹­' ë¼ë²¨ê³¼ ì²´í¬ë°•ìŠ¤ë¥¼ ê°ì‹¸ëŠ” ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
.intern-inline {
  display: flex; /* ìì‹ ìš”ì†Œ(ë¼ë²¨, ì²´í¬ë°•ìŠ¤)ë¥¼ ê°€ë¡œë¡œ ë°°ì¹˜í•©ë‹ˆë‹¤. */
  align-items: center; /* ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ ì¤‘ì•™ì— ì •ë ¬í•©ë‹ˆë‹¤. */
  gap: 8px; /* ë¼ë²¨ê³¼ ì²´í¬ë°•ìŠ¤ ì‚¬ì´ì— 8pxì˜ ê°„ê²©ì„ ì¤ë‹ˆë‹¤. */
}

/* 'ì¸í„´ì‹­' ë¼ë²¨ì—ë§Œ ì ìš©ë  ìŠ¤íƒ€ì¼ (ê¸°ì¡´ì˜ block ì†ì„± ë®ì–´ì“°ê¸°) */
.intern-inline .intern-label {
  display: inline-block; /* ë¼ë²¨ì´ í•œ ì¤„ì„ ë‹¤ ì°¨ì§€í•˜ì§€ ì•Šë„ë¡ ë³€ê²½í•©ë‹ˆë‹¤. */
  margin: 0; /* ë¼ë²¨ ì•„ë˜ìª½ì˜ ê¸°ì¡´ ì—¬ë°±ì„ ì œê±°í•©ë‹ˆë‹¤. */
}
   /* =================== íˆìŠ¤í† ë¦¬ ê¸°ëŠ¥ CSS ì¶”ê°€ =================== */
.main-wrapper {
  display: flex;
  gap: 24px;
  max-width: 1500px;
  margin: 0 auto;
  align-items: flex-start;
}
.container {
  flex: 1; /* ë‚¨ëŠ” ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€ */
  min-width: 0;
}
.history-panel {
  width: 320px;
  flex-shrink: 0;
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: 24px;
  padding: 24px;
  box-shadow: 0 10px 30px rgba(0,0,0,.03);
  position: sticky; /* ìŠ¤í¬ë¡¤ã—ã¦ã‚‚ã¤ã„ã¦ãã‚‹ã‚ˆã†ã« */
  top: 24px;
}
.history-panel h2 {
  margin: 0 0 16px;
  font-size: 18px;
}
.history-panel ul {
  list-style: none;
  margin: 0;
  padding: 0;
  max-height: 70vh;
  overflow-y: auto;
}
.history-panel li {
  margin: 0;
  padding: 0;
}
.history-panel .history-item {
  display: block;
  padding: 12px;
  border-radius: 10px;
  cursor: pointer;
  border-bottom: 1px solid var(--line);
  transition: background .15s ease;
}
.history-panel .history-item:hover {
  background: #f3f4f6;
}
.history-panel .history-item strong {
  font-weight: 600;
  color: var(--ink);
  display: block;
}
.history-panel .history-item .meta {
  font-size: 12px;
  color: var(--muted);
  margin-top: 4px;
}
.history-panel .history-item .meta .key {
  font-weight: 600;
}

@media (max-width: 1200px) {
  .main-wrapper {
    flex-direction: column;
  }
  .history-panel {
    width: 100%;
    position: static;
  }
} 
  /* â–¼â–¼â–¼ [ì¶”ê°€] ìë™í™” ë²„íŠ¼ ìŠ¤íƒ€ì¼ â–¼â–¼â–¼ */
    .schedule-button { 
      display: inline-block; 
      background-color: #5E51FF; 
      color: #ffffff; 
      padding: 12px 20px; 
      margin: 16px 0; 
      font-size: 16px; 
      font-weight: bold; 
      text-decoration: none; 
      border-radius: 8px; 
      text-align: center; 
    }

    /* ê³¼ì œ ì„ íƒ ì˜† ì´ˆê¸°í™” ë²„íŠ¼ */
.select-with-reset{
  display:flex;
  gap:10px;
  align-items:center;
}
.select-with-reset select{
  flex:1;
  min-width:0;
}

.icon-btn{
  width:var(--control-h);
  height:var(--control-h);
  border:1px solid var(--line);
  background:#fff;
  border-radius:12px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 2px 0 rgba(17,17,17,.04);
  transition:all .15s ease;
}
.icon-btn:hover{
  transform:translateY(-1px);
  box-shadow:0 6px 14px rgba(17,17,17,.06);
}
.icon-btn img{
  width:18px;
  height:18px;
  opacity:.9;
}

  </style>
</head>
<body>
  <div class="main-wrapper">

    <div class="container">
      <h1>Featuring Recruit ë©”ì¼ ì„œì‹</h1>
      <p class="sub">ì•„ë˜ 3ê°€ì§€ë§Œ ì…ë ¥í•œ ë’¤, ì›í•˜ëŠ” ë‹¨ê³„ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”. í•˜ë‹¨ ë¯¸ë¦¬ë³´ê¸°ì—ì„œ <strong>ì„œì‹ ë³µì‚¬</strong>ë¥¼ í´ë¦­í•˜ë©´ Gmail ë³¸ë¬¸(HTML)ìœ¼ë¡œ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

      <div class="grid">
        <div class="field">
          <label for="name">ì§€ì›ìëª…</label>
          <input id="name" type="text" placeholder="ì˜ˆ: í™ê¸¸ë™" />
        </div>
        <div class="field">
          <label for="position">í¬ì§€ì…˜ëª…</label>
          <input id="position" type="text" placeholder="ì˜ˆ: HR Manager" />
        </div>
        <div class="field">
          <label for="taskurlSelect">ê³¼ì œ ì„ íƒ</label>
          <div class="select-with-reset">
          <select id="taskurlSelect" class="field input" style="padding: 14px 12px; height: auto;">
            <option value="">ê³¼ì œ ì—†ìŒ</option>
            <option value="https://featuring-corp.atlassian.net/wiki/external/ODc0OTc2ODRlNGExNGY0YjhkZWY4ZGEzNzNiNTA0Y2Q">DE ê³¼ì œ</option>
            <option value="https://featuring-corp.atlassian.net/wiki/external/M2E4MzhlMGNhYTUzNDAwNmI2MTkyZmZiOGQxZTZkYTU">BE (Jr) ê³¼ì œ</option>
            <option value="https://featuring-corp.atlassian.net/wiki/external/OTZmYzQ0ZWNiMWJiNDk1MDliMWI2N2YzN2IzZGQ1NTc">BE (Mid&Sr) ê³¼ì œ</option>   
            <option value="https://featuring-corp.atlassian.net/wiki/external/NTU4ODQxZTc1MTQyNDM4OWEzYTEzZTdjNTcyNWM1M2U">AI ê³¼ì œ</option>
            <option value="https://featuring-corp.atlassian.net/wiki/external/OTFkOTQ3YmFhZGI4NGM1ZWJhYmFlOTUwZTAzMWVjM2U">PM ê³¼ì œ</option>
            <option value="https://featuring-corp.atlassian.net/wiki/external/OTAzZThhODIxZmM5NGIyZmE2ODc3MWU2NDQwMjAwMjQ">FE ê³¼ì œ</option>
    </select>
    <button type="button" id="resetBtn" class="icon-btn" aria-label="ì…ë ¥ê°’ ì´ˆê¸°í™”">
      <img src="assets/reset.png" alt="" />
    </button>
  </div>
        </div>
      </div>

      <div class="grid dates">
        <div class="field">
          <label>ì œì•ˆì¼ì</label>
          <div class="datebox">
            <div class="date-row"> <input id="p1y" class="y" placeholder="yyyy" /> <span class="sep">-</span> <input id="p1m" class="m" placeholder="mm" /> <span class="sep">-</span> <input id="p1d" class="d" placeholder="dd" /> <select id="p1w" class="w"> <option value="">(ìš”ì¼)</option><option>ì›”</option><option>í™”</option><option>ìˆ˜</option> <option>ëª©</option><option>ê¸ˆ</option><option>í† </option><option>ì¼</option> </select> <input id="p1h" class="h" placeholder="24" /> <span class="colon">:</span> <input id="p1i" class="i" placeholder="00" /> </div>
            <div class="date-row"> <input id="p2y" class="y" placeholder="yyyy" /> <span class="sep">-</span> <input id="p2m" class="m" placeholder="mm" /> <span class="sep">-</span> <input id="p2d" class="d" placeholder="dd" /> <select id="p2w" class="w"> <option value="">(ìš”ì¼)</option><option>ì›”</option><option>í™”</option><option>ìˆ˜</option> <option>ëª©</option><option>ê¸ˆ</option><option>í† </option><option>ì¼</option> </select> <input id="p2h" class="h" placeholder="24" /> <span class="colon">:</span> <input id="p2i" class="i" placeholder="00" /> </div>
            <div class="date-row"> <input id="p3y" class="y" placeholder="yyyy" /> <span class="sep">-</span> <input id="p3m" class="m" placeholder="mm" /> <span class="sep">-</span> <input id="p3d" class="d" placeholder="dd" /> <select id="p3w" class="w"> <option value="">(ìš”ì¼)</option><option>ì›”</option><option>í™”</option><option>ìˆ˜</option> <option>ëª©</option><option>ê¸ˆ</option><option>í† </option><option>ì¼</option> </select> <input id="p3h" class="h" placeholder="24" /> <span class="colon">:</span> <input id="p3i" class="i" placeholder="00" /> </div>
          </div>
        </div>
        <div class="field field-confirm">
          <label>í™•ì •ì¼ì</label>
          <div class="datebox">
            <div class="date-row"> <input id="c1y" class="y" placeholder="yyyy" /> <span class="sep">-</span> <input id="c1m" class="m" placeholder="mm" /> <span class="sep">-</span> <input id="c1d" class="d" placeholder="dd" /> <select id="c1w" class="w"> <option value="">(ìš”ì¼)</option><option>ì›”</option><option>í™”</option><option>ìˆ˜</option> <option>ëª©</option><option>ê¸ˆ</option><option>í† </option><option>ì¼</option> </select> <input id="c1h" class="h" placeholder="24" /> <span class="colon">:</span> <input id="c1i" class="i" placeholder="00" /> </div>
          </div>
        </div>
      </div>

      <div class="dates-after">
        <div class="intern-inline">
          <label for="isIntern" class="intern-label">ì¸í„´ì‹­</label>
          <input id="isIntern" type="checkbox" />
        </div>
      </div>

      <div class="btn-row" aria-label="ë‹¨ê³„ ë²„íŠ¼">
        <button type="button" button class="btn js-template" data-key="assignment_schedule">ê³¼ì œ ì¼ì •</button>
        <button type="button" button class="btn js-template" data-key="task">ê³¼ì œì „í˜•</button> 
        <button type="button" button class="btn js-template" data-key="interview1">1ì°¨ ì¸í„°ë·°</button> 
        <button type="button" button class="btn js-template" data-key="interviewFinal">ìµœì¢… ì¸í„°ë·°</button> 
        <button type="button" button class="btn js-template" data-key="scheduleConfirm">ì¼ì • í™•ì •</button> 
        <button type="button" button class="btn js-template" data-key="reference">ë ˆí¼ëŸ°ìŠ¤ ì²´í¬</button> 
        <button type="button" button class="btn js-template" data-key="finalNotice">ì²˜ìš°í˜‘ì˜ ë° ì˜¤í¼ë ˆí„°</button> 
        <button type="button" button class="btn js-template" data-key="onboarding">ì…ì‚¬ ì•ˆë‚´</button> 
        <button type="button" button class="btn black js-template" data-key="reject">ë¶ˆí•©ê²©</button>
      </div>

      <div class="actions">
        <button id="copyBtn" class="btn primary" disabled>ì„œì‹ ë³µì‚¬</button>
        <button id="copySubjectBtn" class="btn" disabled>ì œëª© ë³µì‚¬</button>
        <span id="subjectPreview" class="hint" aria-live="polite"></span>
      </div>

      <div class="preview">
        <h3>ë¯¸ë¦¬ë³´ê¸°</h3>
        <div id="preview" class="frame" aria-live="polite">ì•„ì§ ì„ íƒëœ ì„œì‹ì´ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>
    </div>

    <aside class="history-panel">
      <h2>ìµœê·¼ ë‚´ì—­ ë¶ˆëŸ¬ì˜¤ê¸°</h2>
      <ul id="historyList">
        </ul>
    </aside>

  </div> <div id="toast" class="toast" role="status" aria-live="polite">í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.</div>
  <script>
  const WEB_APP_URL = "https://re111um.github.io/interviewsc/";
  const ONBOARDING_FORM_URL_INTERN = "https://tally.so/r/eqRpbQ";
  const ONBOARDING_FORM_URL_REGULAR = "https://tally.so/r/jaPpr6";
  const CULTURE_GUIDE_URL = "https://teamfeaturing.notion.site/Featuring-Culture-Guide-df09fd30889a42e3845c7802d316b184?source=copy_link"; // ë¬¸í™” ì†Œê°œì„œ ë§í¬ (ì›í•˜ë©´ ì‹¤ì œ ë§í¬ë¡œ êµì²´)



 /* ---------- ìœ í‹¸ ---------- */
  const brandLinkStyle = "color:#111111; text-decoration:underline;";
  const PAGES_BASE = "https://re111um.github.io/recruitmail/";
  function getHeaderImageSrc(){
  return PAGES_BASE + 'assets/process.png?v=2';
}
  function wrapEmail(contentHtml){ const header = '<div style="margin:0 0 20px 0; text-align:left;"><img src="' + getHeaderImageSrc() + '" width=848" height="135" alt="Featuring Recruit" style="display:block;margin:0;width:848px;height:135px;border:0;"/></div>'; const signoffRe = new RegExp('<p[^>]*>\\s*ê°ì‚¬í•©ë‹ˆë‹¤\\.[\\s\\S]*?ì±„ìš©íŒ€\\s*ë“œë¦¼\\.?\\s*<\\/p>', 'i'); const injected = signoffRe.test(contentHtml) ? contentHtml.replace(signoffRe, header + '$&') : (header + contentHtml); return '<div style="font-family:Arial, Helvetica, \\"Apple SD Gothic Neo\\", \\"Noto Sans KR\\", \\"Malgun Gothic\\", sans-serif; font-size:14px; color:#111111; line-height:1.7;"><div style="padding:8px 0 16px 0">' + injected + '</div></div>'; }
  function wrapEmailNoHeader(contentHtml){ return '<div style="font-family:Arial, Helvetica, \\"Apple SD Gothic Neo\\", \\"Noto Sans KR\\", \\"Malgun Gothic\\", sans-serif; font-size:14px; color:#111111; line-height:1.7;"><div style="padding:8px 0 16px 0">' + contentHtml + '</div></div>'; }
  function escapeHtml(s){ return String(s||'').replace(/[&<>"]/g, t => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[t]||t)); }
  function roleHtml(v){ const p=(v.position||'').trim(); return escapeHtml(p) + (v.isIntern ? ' (ì¸í„´ì‹­)' : ''); }
  function subjectRole(v){ const p=(v.position||'').trim(); return p + (v.isIntern ? ' (ì¸í„´ì‹­)' : ''); }
  function nameFull(v){ return escapeHtml((v.name||'').trim()); }
  function nameBody(v){ const s=(v.name||'').trim(); if(!s) return ''; const space=s.indexOf(' '); const shown = space>0 ? s.slice(space+1) : (s.length>1 ? s.slice(1) : s); return escapeHtml(shown); }
  function normalizeUrl(u){ if(!u) return ''; const s=u.trim(); if(/^(https?:)?\/\//i.test(s)) return s.startsWith('//') ? 'https:'+s : s; return 'https://'+s; }
  function pad2(n){ n=String(n||''); return n.length===1?('0'+n):n; }
  function readDate(prefix){ const y=(document.getElementById(prefix+'y')?.value||'').trim(); const m=(document.getElementById(prefix+'m')?.value||'').trim(); const d=(document.getElementById(prefix+'d')?.value||'').trim(); const w=(document.getElementById(prefix+'w')?.value||'').trim(); const h=(document.getElementById(prefix+'h')?.value||'').trim(); const i=(document.getElementById(prefix+'i')?.value||'').trim(); if(!(y&&m&&d&&w&&h&&i)) return ''; return `${y}-${pad2(m)}-${pad2(d)} (${w}) ${pad2(h)}:${pad2(i)}`; }
  const ASSET_BASE = 'https://raw.githubusercontent.com/re111um/recruitmail/main/';

  function getLogoImageSrc(){
  return PAGES_BASE + 'assets/Symbol_BG_Transparent.png?v=2';
}
    
  /* ê³¼ì œ ì˜µì…˜ ë©”íƒ€ (type ì†ì„± ì¶”ê°€ë¨) */
  const TASK_META = { 
    "": { label: "ê³¼ì œ ì—†ìŒ", topic: "", type: "DEFAULT" }, 
    "https://featuring-corp.atlassian.net/wiki/external/ODc0OTc2ODRlNGExNGY0YjhkZWY4ZGEzNzNiNTA0Y2Q": { label: "DE ê³¼ì œ", topic: "ì†Œì…œ ë¯¸ë””ì–´ ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì‹œìŠ¤í…œ ì„¤ê³„", type: "DEFAULT" }, 
    "https://featuring-corp.atlassian.net/wiki/external/M2E4MzhlMGNhYTUzNDAwNmI2MTkyZmZiOGQxZTZkYTU": { label: "BE ê³¼ì œ", topic: "ëŒ€ëŸ‰ DM/ë©”ì¼ ì „ì†¡ ì‹œìŠ¤í…œ ì„¤ê³„", type: "DEFAULT" }, 
    "https://featuring-corp.atlassian.net/wiki/external/OTZmYzQ0ZWNiMWJiNDk1MDliMWI2N2YzN2IzZGQ1NTc": { label: "BE ê³¼ì œ", topic: "ëŒ€ëŸ‰ DM/ë©”ì¼ ì „ì†¡ ì‹œìŠ¤í…œ ì„¤ê³„", type: "DEFAULT" }, 
    "https://featuring-corp.atlassian.net/wiki/external/NTU4ODQxZTc1MTQyNDM4OWEzYTEzZTdjNTcyNWM1M2U": { label: "AI ê³¼ì œ", topic: "ë©€í‹°ëª¨ë‹¬ RAG ì„±ëŠ¥ ìµœì í™” ì‹œìŠ¤í…œ êµ¬ì¶•", type: "DEFAULT" },
    "https://featuring-corp.atlassian.net/wiki/external/OTFkOTQ3YmFhZGI4NGM1ZWJhYmFlOTUwZTAzMWVjM2U": { label: "PM ê³¼ì œ", topic: "ì„œë¹„ìŠ¤ ì „ëµ ë° ë¡œë“œë§µ ìˆ˜ë¦½", type: "PM" },
    "https://featuring-corp.atlassian.net/wiki/external/OTAzZThhODIxZmM5NGIyZmE2ODc3MWU2NDQwMjAwMjQ": { label: "FE ê³¼ì œ", topic: " ê³ ë„í™”ëœ ë¦¬ìŠ¤íŠ¸ í…Œì´ë¸” ì‹œìŠ¤í…œ ì„¤ê³„", type: "FE" }                     
  };

 function getTaskTopicByUrl(u){ if(!u) return ''; const k=normalizeUrl(u); return (TASK_META[k] && TASK_META[k].topic) ? TASK_META[k].topic : ''; }

 // â–¼â–¼â–¼ [ì¶”ê°€] TASK_METAì—ì„œ Typeì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ â–¼â–¼â–¼
  function getTaskTypeByUrl(u){ if(!u) return 'DEFAULT'; const k=normalizeUrl(u); return (TASK_META[k] && TASK_META[k].type) ? TASK_META[k].type : 'DEFAULT'; }

  // â–¼â–¼â–¼ [ì¶”ê°€] FE ë§ˆê°ì¼ ê³„ì‚° í•¨ìˆ˜ (í™•ì •ì¼ + 2ì¼) â–¼â–¼â–¼
  function getFeDeadline(dateStr) {
    if(!dateStr) return '<span style="color:#6b7280;">{ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”}</span>';
    
    // "YYYY-MM-DD" í˜•ì‹ì„ ì¶”ì¶œ
    const match = dateStr.match(/^(\d{4})-(\d{2})-(\d{2})/);
    if(!match) return dateStr; // í¬ë§·ì´ ì•ˆ ë§ìœ¼ë©´ ì›ë³¸ ë°˜í™˜

    const y = parseInt(match[1], 10);
    const m = parseInt(match[2], 10) - 1; // JS ì›”ì€ 0ë¶€í„° ì‹œì‘
    const d = parseInt(match[3], 10);

    const date = new Date(y, m, d);
    date.setDate(date.getDate() + 2); // 2ì¼ ë”í•˜ê¸°

    const weekNames = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "];
    const ny = date.getFullYear();
    const nm = pad2(date.getMonth() + 1);
    const nd = pad2(date.getDate());
    const nw = weekNames[date.getDay()];

    return `${ny}-${nm}-${nd} (${nw}) 23:59`;
  }   

// â–¼â–¼â–¼ [ìˆ˜ì •] ê¸°ì¡´ generateScheduleLink í•¨ìˆ˜ë¥¼ ì´ê±¸ë¡œ í†µì§¸ë¡œ êµì²´í•˜ì„¸ìš” â–¼â–¼â–¼
function generateScheduleLink(vars, key) {
  // 1. URLì´ ë¹„ì–´ìˆê±°ë‚˜ ì œëŒ€ë¡œ ì„¤ì •ë˜ì§€ ì•Šì•˜ì„ ë•Œ ì—ëŸ¬ ì²˜ë¦¬
  if (!WEB_APP_URL || WEB_APP_URL.trim() === "" || WEB_APP_URL.includes("ì—¬ê¸°ì—")) {
    return '#error-url-not-set';
  }

  // 2. ë§í¬ 1ê°œë‹¹ ê³ ìœ ê°’(ì¤‘ë³µ ì œì¶œ ë°©ì§€ìš©)
  const rid = (crypto && crypto.randomUUID) ? crypto.randomUUID()
            : ('rid_' + Date.now() + '_' + Math.random().toString(16).slice(2));

  // 3. íŒŒë¼ë¯¸í„° ìƒì„± (GitHubê°€ ì½ì„ ìˆ˜ ìˆë„ë¡)
  const params = new URLSearchParams({
    name: vars.name,
    position: vars.position,
    stage: templateKeys[key] || key,
    dates: vars.proposeDates.join(','),
    rid: rid, 
    v: new Date().getTime() // ìºì‹œ ë°©ì§€ìš©
  });

  // 4. GitHub ì£¼ì†Œë¡œ ì—°ê²°
  return `${WEB_APP_URL}?${params.toString()}`;
}

// â–¼â–¼â–¼ ì´ í•¨ìˆ˜ ë¶€ë¶„ì„ ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ ì™„ì „íˆ ìƒˆë¡œ êµì²´í•˜ì„¸ìš” â–¼â–¼â–¼
// vars ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ë²„íŠ¼ HTMLì„ ë§Œë“œëŠ” í•¨ìˆ˜
function getScheduleButtonHtml(vars, key) {
  if (['interview1', 'interviewFinal', 'assignment_schedule'].includes(key) && vars.proposeDates.length > 0) {
    
    // 1. ì›ë³¸ vars ë°ì´í„°ë¥¼ ë³µì‚¬í•´ì„œ processedVarsë¥¼ ë§Œë“­ë‹ˆë‹¤. (...vars ê·¸ëŒ€ë¡œ ì…ë ¥)
    let processedVars = { ...vars }; 

    // 2. ë§Œì•½ ëˆ„ë¥¸ ë²„íŠ¼ì´ 'ê³¼ì œ ì¼ì •'ì´ë¼ë©´?
    if (key === 'assignment_schedule') {
      // ë³µì‚¬ë³¸ì— ë“¤ì–´ìˆëŠ” ë‚ ì§œë“¤ì—ì„œ ì‹œê°„ë§Œ ì°¾ì•„ '09:00'ìœ¼ë¡œ ê°•ì œë¡œ ë°”ê¿‰ë‹ˆë‹¤.
      processedVars.proposeDates = vars.proposeDates.map(dateStr => 
        dateStr.replace(/\d{2}:\d{2}$/, "09:00")
      );
    }

    // 3. ìˆ˜ì •ëœ ë³µì‚¬ë³¸(processedVars)ì„ ì‚¬ìš©í•´ ë§í¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    const link = generateScheduleLink(processedVars, key);
    
    // URL ì„¤ì • ì²´í¬
    if (link === '#error-url-not-set') {
      return '<p style="color:red; font-weight:bold;">[ì˜¤ë¥˜] ìŠ¤í¬ë¦½íŠ¸ ìƒë‹¨ì˜ WEB_APP_URLì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”!</p>';
    }
    
    // ë²„íŠ¼ HTML ë°˜í™˜
    return `<a href="${link}" target="_blank" style="display: inline-block; background-color: #5E51FF; color: #ffffff; padding: 12px 20px; margin: 16px 0; font-size: 16px; font-weight: bold; text-decoration: none; border-radius: 8px; text-align: center;">ğŸ“… ê°€ëŠ¥ ì¼ì • ì„ íƒí•˜ê¸°</a>`;
  }
  
  // ì¡°ê±´ì— ë§ì§€ ì•Šìœ¼ë©´ ë¹ˆ ë¬¸ìì—´ ë°˜í™˜
  return '';
}
// â–²â–²â–² ì—¬ê¸°ê¹Œì§€ êµì²´ â–²â–²
    /* í…œí”Œë¦¿ë“¤ (ë¬¸êµ¬ ë³€ê²½ ì—†ìŒ) */
    const templates = {
    assignment_schedule: (v, k) => wrapEmail(`
      <p style="margin:0 0 3px 0;"><strong>[Featuring]</strong></p>
      <p style="margin:0 0 3px 0;">ì•ˆë…•í•˜ì„¸ìš”, ${nameFull(v)}ë‹˜.</p>
      <p style="margin:0 0 14px 0;">í”¼ì²˜ë§ ì±„ìš©íŒ€ì…ë‹ˆë‹¤.</p>

    <p style="margin:0 0 3px 0;">ë¨¼ì € ì €í¬ íšŒì‚¬ì™€  ${ v.isIntern ? `ì¸í„´ì‹­ í”„ë¡œê·¸ë¨` : `${escapeHtml(v.position)} í¬ì§€ì…˜` }ì— ê´€ì‹¬ ê°€ì ¸ì£¼ì‹œê³  ì§€ì›í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>
    <p style="margin:0 0 3px 0;">ì œì¶œí•´ ì£¼ì‹  ì´ë ¥ì„œì™€ ê²½ë ¥ ì‚¬í•­ì„ ê²€í† í•œ ê²°ê³¼,</p> 
    <p style="margin:0 0 3px 0;">${nameBody(v)}ë‹˜ì˜ ì—­ëŸ‰ê³¼ ê²½í—˜ì´ í•´ë‹¹ í¬ì§€ì…˜ì— ì í•©í•˜ë‹¤ê³  íŒë‹¨ë˜ì–´ ê³¼ì œ ì „í˜•ì„ ì§„í–‰í•˜ê³ ì í•©ë‹ˆë‹¤.</p>
    <p style="margin:0 0 14px 0;">ê³¼ì œëŠ” ì§„í–‰ ë‹¹ì¼ ìœ ì˜ ì‚¬í•­ê³¼ í•¨ê»˜ ì•ˆë‚´ ë˜ë©°, ê°€ëŠ¥í•œ ì¼ì • í™•ì¸ì„ ìœ„í•´ ë©”ì¼ë¡œ ì—°ë½ë“œë¦¬ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
  
      <p style="margin:0 0 3px 0;"><strong>[ì§„í–‰ ì•ˆë‚´]</strong></p>
      <div style="padding-left:5px; margin:0 0 3px 0;">
        <p style="margin:0 0 3px 0;">- ìœ í˜• : ê³¼ì œ ì „í˜•</p>
        <p style="margin:0 0 3px 0;">- í¬ì§€ì…˜ : ${roleHtml(v)}</p>
        <p style="margin:0 0 3px 0;">- ì¼ì‹œ : í•˜ë‹¨ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê°€ëŠ¥í•œ ì¼ì •ì„ ì œì¶œí•´ì£¼ì„¸ìš”.<br />
        <span style="color: #888888; font-size: 0.9em;">(*ë§í¬ê°€ ì—´ë¦¬ì§€ ì•ŠëŠ”ë‹¤ë©´, ì‹œí¬ë¦¿ ì°½ì—ì„œ ì—´ì–´ë³´ì„¸ìš”.)</span>
</p>
    </div>
    ${getScheduleButtonHtml(v, k)}
    <p style="margin:0 0 3px 0;">í˜¹ì‹œ ì•ˆë‚´ë“œë¦° ë²„íŠ¼ì„ í†µí•œ ì¼ì • ì„ íƒì´ ì–´ë ¤ìš°ì‹œë‹¤ë©´, ë³¸ ë©”ì¼ë¡œ ê°€ëŠ¥í•œ ì‹œê°„ëŒ€ë¥¼ íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br />
    ê³¼ì œ ì „í˜• ì œì¶œì¼ì€ ì§ë¬´ì— ë”°ë¼ ìƒì´í•˜ë©°, ê¸°ë³¸ì ìœ¼ë¡œ ì‹œì‘ ë‹¹ì¼ 23:59ê¹Œì§€ ì œì¶œì´ ì›ì¹™ì…ë‹ˆë‹¤. (*FEì˜ ê²½ìš°, 3ì¼ ë‚´ ì œì¶œ ê¶Œì¥.) <br />
    ë˜ í›„ë³´ì ë¶„ê»˜ì„œ ì˜¤ë¡œì§€ ê³¼ì œì— ì§‘ì¤‘í•˜ì‹¤ ìˆ˜ ìˆë„ë¡ íœ´ì¼ ì§„í–‰ì„ ì œì•ˆë“œë¦¬ê³  ìˆìœ¼ë©°, ë‹¤ë¥¸ ì¼ìë„ ê´œì°®ìœ¼ì‹œë©´ í¸í•˜ê²Œ íšŒì‹  ë°”ëë‹ˆë‹¤. :)</p>
    <p style="margin:0 0 14px 0;">ê°ì‚¬í•©ë‹ˆë‹¤.<br />í”¼ì²˜ë§ ì±„ìš©íŒ€ ë“œë¦¼.</p>
    
    
  `),
      
      task: (v) => { 
        const role = roleHtml(v);
        
        // 1. ì œì¶œ í˜•ì‹ (Submission Format) ë¶„ê¸° ì²˜ë¦¬
        let submissionFormatHtml = '';
        if (v.taskType === 'PM') {
            submissionFormatHtml = `<p style="margin:0 0 3px 18px;">ëª¨ë“  ë‚´ìš©ì„ í•˜ë‚˜ì˜ PDF íŒŒì¼ë¡œ ì •ë¦¬í•˜ì—¬ ì œì¶œ ê¶Œì¥í•©ë‹ˆë‹¤.</p>`;
        } else if (v.taskType === 'FE') {
            submissionFormatHtml = `
            <ul style="margin:0 0 3px 18px; padding:0;">
                <li>GitHub Repository</li>
                <li>ë˜ëŠ” zip íŒŒì¼ / Google Drive ë§í¬ / ì´ë©”ì¼ ì œì¶œ</li>
            </ul>`;
        } else {
            // Default (DE, BE, AI, etc.)
            submissionFormatHtml = `
            <ul style="margin:0 0 3px 18px; padding:0;">
                <li>êµ¬ì„±ì„ í•œëˆˆì— ë³¼ ìˆ˜ ìˆëŠ” ë„ì‹(Flowchart, Architecture Diagram ë“±)ì„ í¬í•¨í•´ì£¼ì„¸ìš”.</li>
                <li>ë°ì´í„° ê´€ë¦¬ë¶€í„° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„ ë‹¨ê³„ê¹Œì§€, ê° ê³¼ì •ì—ì„œ ê³ ë ¤í•´ì•¼ í•  ìš”ì†Œ(ì„±ëŠ¥, í™•ì¥ì„±, ë³´ì•ˆ, ë¹„ìš© íš¨ìœ¨ì„±, ëª¨ë‹ˆí„°ë§ ë“±)ì— ëŒ€í•´ íŒŒì´í”„ë¼ì¸ì„ ê¸°ìˆ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</li>
                <li>ë¬¸ì„œ í˜•ì‹ì€ PPT, PDF, Markdown ë“± ììœ ë¡­ê²Œ ì„ íƒí•˜ì‹œë©´ ë©ë‹ˆë‹¤.</li>
            </ul>`;
        }

// 2. ë§ˆê° ê¸°í•œ (Deadline) ë¶„ê¸° ì²˜ë¦¬
        let deadlineHtml = '';
        if (v.taskType === 'FE') {
            // FE: í™•ì •ì¼ + 2ì¼ ê³„ì‚°
            const calculatedDate = getFeDeadline(v.confirmDate);
            deadlineHtml = `<li><strong>${calculatedDate}ê¹Œì§€</strong> ì œì¶œ ë°”ëë‹ˆë‹¤.</li>`;
        } else {
            // Default: ê¸ˆì¼ ìì • (ë‚ ì§œê°€ ìˆìœ¼ë©´ 23:59ë¡œ ì¹˜í™˜, ì—†ìœ¼ë©´ placeholder)
            const dateStr = v.confirmDate 
                ? escapeHtml(v.confirmDate.replace(/\d{2}:\d{2}$/, "23:59")) 
                : `<span style="color:#6b7280;">{ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”}</span>`;
            deadlineHtml = `<li><strong>ê¸ˆì¼ ìì •(${dateStr})ì „ ê¹Œì§€</strong> íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.</li>`;
        }

        return wrapEmail(`
        <p style="margin:0 0 3px 0;"><strong>[Featuring]</strong></p>
        <p style="margin:0 0 3px 0;">ì•ˆë…•í•˜ì„¸ìš”. ${nameFull(v)}ë‹˜. :)</p>
        <p style="margin:0 0 14px 0;">í”¼ì²˜ë§ ì±„ìš©íŒ€ì…ë‹ˆë‹¤.</p>

        <p style="margin:0 0 3px 0;">ë¨¼ì € ë‹¹ì‚¬ì™€ ${role} í¬ì§€ì…˜ì— ê´€ì‹¬ ê°€ì ¸ì£¼ì‹œê³  ì§€ì›í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>
        <p style="margin:0 0 14px 0;">ê³¼ì œëŠ” ì‹¤ì œ ì—…ë¬´ì™€ ìœ ì‚¬í•œ ìƒí™©ì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ëª©í‘œëŠ” ì•„í‚¤í…ì²˜ ì„¤ê³„ ë° ê¸°ìˆ ì  ì˜ì‚¬ê²°ì • ëŠ¥ë ¥ì„ í‰ê°€í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.</p>

        <p style="margin:0 0 3px 0;"><strong>[ê³¼ì œ ì „í˜• ì•ˆë‚´]</strong></p>
        <div style="padding-left:8px; margin:0 0 3px 0;">
        <p style="margin:0 3px 3px 0;">âœ… <strong>ê³¼ì œ ì£¼ì œ</strong> : ${escapeHtml(v.taskTopic)}</p>
        ${v.taskurl ? `<p style="margin:0 3px 3px 0;">âœ… <strong>ê³¼ì œ ë§í¬</strong> : <a href="${v.taskurl}" style="${brandLinkStyle}"><span style="color:#3d85c6">URL</span></a></p>` : ''}
        
        <p style="margin:3px 0 3px 0;">âœ… <strong>ì œì¶œ í˜•ì‹</strong> :</p>
        ${submissionFormatHtml}

        <p style="margin:3px 0 3px 0;">âœ… <strong>ë§ˆê° ê¸°í•œ</strong> :</p>
        <ul style="margin:0 0 14px 18px; padding:0;">
            ${deadlineHtml}
            <li>í•´ë‹¹ ë©”ì¼ì— [ì „ì²´ ë‹µì¥] ë˜ëŠ” recruit@featuring.inìœ¼ë¡œ ì œì¶œí•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</li>
        </ul>
        </div>
        <p style="margin:0 0 3px 0;">ì œì¶œí•˜ì‹  ê³¼ì œëŠ” ë‚´ë¶€ ê¸°ìˆ  ë¦¬ë“œ ë° ê°œë°œíŒ€ê³¼ í•¨ê»˜ ê²€í† í•  ì˜ˆì •ì´ë©°, ê²°ê³¼ëŠ” ì œì¶œì¼ë¡œë¶€í„° ì˜ì—…ì¼ ê¸°ì¤€ 3ì¼ ì „ê¹Œì§€ ì•ˆë‚´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>
        <p style="margin:0 0 3px 0;">ê³¼ì œ ì§„í–‰ ì¤‘ ê¶ê¸ˆí•˜ì‹  ì‚¬í•­ì´ ìˆê±°ë‚˜ ì œì¶œ ê¸°í•œì— ì–´ë ¤ì›€ì´ ìˆìœ¼ì‹¤ ê²½ìš°, ì–¸ì œë“  í¸í•˜ê²Œ í•´ë‹¹ ë©”ì¼ë¡œ ì—°ë½ ë¶€íƒë“œë¦½ë‹ˆë‹¤. :)</p>

        <p style="margin:0 0 14px 0; color:#b91c1c; font-style:italic; font-size:12px;">
        (*í•´ë‹¹ ê³¼ì œëŠ” í”¼ì²˜ë§ì˜ ìì‚°ì´ë¯€ë¡œ ì™¸ë¶€ ë° ì œ3ì ìœ ì¶œ ì‹œ ì±„ìš© ê³¼ì •ì´ ì·¨ì†Œë˜ë©°, ë³„ë„ì˜ ì¡°ì¹˜ ë  ìˆ˜ ìˆìŒì„ ì‚¬ì „ì— ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.)
        </p>

        <p style="margin:0;">ê°ì‚¬í•©ë‹ˆë‹¤.<br />í”¼ì²˜ë§ ì±„ìš©íŒ€ ë“œë¦¼.</p>
`); },

      interview1: (v,k) => wrapEmail(`
  <p style="margin:0 0 3px 0;"><strong>[Featuring]</strong></p>
  <p style="margin:0 0 3px 0;">ì•ˆë…•í•˜ì„¸ìš”, ${nameFull(v)}ë‹˜.</p>
  <p style="margin:0 0 14px 0;">í”¼ì²˜ë§ ì±„ìš©íŒ€ì…ë‹ˆë‹¤.</p>

  <p style="margin:0 0 3px 0;">ë¨¼ì € ì €í¬ íšŒì‚¬ì™€  ${ v.isIntern ? `ì¸í„´ì‹­ í”„ë¡œê·¸ë¨` : `${escapeHtml(v.position)} í¬ì§€ì…˜` }ì— ê´€ì‹¬ ê°€ì ¸ì£¼ì‹œê³  ì§€ì›í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>
  <p style="margin:0 0 3px 0;">ì œì¶œí•´ ì£¼ì‹  ì´ë ¥ì„œì™€ ê²½ë ¥ ì‚¬í•­ì„ ê²€í† í•œ ê²°ê³¼,</p> 
  <p style="margin:0 0 3px 0;">${nameBody(v)}ë‹˜ì˜ ì—­ëŸ‰ê³¼ ê²½í—˜ì´ í•´ë‹¹ í¬ì§€ì…˜ì— ì í•©í•˜ë‹¤ê³  íŒë‹¨ë˜ì–´ 1ì°¨ ì¸í„°ë·°ë¥¼ ì§„í–‰í•˜ê³ ì í•©ë‹ˆë‹¤.</p>
  <p style="margin:0 0 14px 0;">ì¸í„°ë·°ëŠ” ëŒ€ë©´ìœ¼ë¡œ ì§„í–‰ë˜ë©°, ê°€ëŠ¥í•œ ì¼ì • í™•ì¸ì„ ìœ„í•´ ë©”ì¼ë¡œ ì—°ë½ë“œë¦¬ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>

  <p style="margin:0 0 3px 0;"><strong>[ì§„í–‰ ê°€ëŠ¥ ì¼ì •/ì¥ì†Œ]</strong></p>
  <div style="padding-left:5px; margin:0 0 3px 0;">
  <p style="margin:0 0 3px 0;">- ìœ í˜• : 1ì°¨ ì¸í„°ë·° (ì‹¤ë¬´ì§„ ì°¸ì—¬)</p>
  <p style="margin:0 0 3px 0;">- í¬ì§€ì…˜ : ${roleHtml(v)}</p>
  <p style="margin:0 0 3px 0;">- ì¥ì†Œ : ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 129, ë¹—ì¸ê¸ˆìœµíƒ€ì›Œ 8ì¸µ</p>
  <p style="margin:0 0 3px 0;">- ì¼ì‹œ : í•˜ë‹¨ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê°€ëŠ¥í•œ ì¼ì •ì„ ì œì¶œí•´ì£¼ì„¸ìš”.<br />
  <span style="color: #888888; font-size: 0.9em;">(*ë§í¬ê°€ ì—´ë¦¬ì§€ ì•ŠëŠ”ë‹¤ë©´, ì‹œí¬ë¦¿ ì°½ì—ì„œ ì—´ì–´ë³´ì„¸ìš”.)</span>
</p></div>
  ${getScheduleButtonHtml(v, k)}
  <p style="margin:0 0 3px 0;">í˜¹ì‹œ í•´ë‹¹ ì¼ì‹œ ë° ì‹œê°„ëŒ€ê°€ ì–´ë ¤ìš°ì‹œë‹¤ë©´, ê°€ëŠ¥í•œ ì‹œê°„ì„ 2~3ê°œ ì¼ì •ì •ë„ í•¨ê»˜ ê³µìœ í•´ ì£¼ì‹œë©´ ì¡°ìœ¨í•˜ì—¬ ì§„í–‰í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
  <p style="margin:0 0 14px 0;">ì¶”ê°€ë¡œ ì¸í„°ë·°ì— ì•ì„œ ì¤€ë¹„í•´ì•¼ í•  ì‚¬í•­ì´ë‚˜ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë‹¤ë©´ ì–¸ì œë“ ì§€ í¸í•˜ê²Œ ì—°ë½ ë¶€íƒ ë“œë¦½ë‹ˆë‹¤. :)</p>
  
  <p style="margin:0;">ê°ì‚¬í•©ë‹ˆë‹¤.<br />í”¼ì²˜ë§ ì±„ìš©íŒ€ ë“œë¦¼.</p>
`),

      interviewFinal: (v,k) => wrapEmail(`
  <p style="margin:0 0 3px 0;"><strong>[Featuring]</strong></p>
  <p style="margin:0 0 3px 0;">ì•ˆë…•í•˜ì„¸ìš”, ${nameFull(v)}ë‹˜.</p>
  <p style="margin:0 0 14px 0;">í”¼ì²˜ë§ ì±„ìš©íŒ€ì…ë‹ˆë‹¤.</p>

  <p style="margin:0 0 3px 0;">ìš°ì„  ì§€ë‚œ ì¸í„°ë·°ì— í”ì¾Œíˆ ì‘í•´ì£¼ì‹œê³ , ì†Œì¤‘í•œ ì‹œê°„ í• ì• í•˜ì—¬ ì ê·¹ ì°¸ì—¬í•´ì£¼ì‹  ì  ì§„ì‹¬ìœ¼ë¡œ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.</p>
  <p style="margin:0 0 14px 0;">${nameBody(v)}ë‹˜ê»˜ì„œ 1ì°¨ ì¸í„°ë·°ë¥¼ í†µí•´ ë³´ì—¬ì£¼ì‹  ì—­ëŸ‰ê³¼ ì§€ê¸ˆê¹Œì§€ ìŒ“ì•„ì˜¤ì‹  ì»¤ë¦¬ì–´ì— ëŒ€í•´ ì¸ìƒ ê¹Šê²Œ ìƒê°í•˜ì—¬ <strong>ìµœì¢… ì¸í„°ë·° ì œì•ˆ</strong>ë“œë¦¬ê³ ì í•©ë‹ˆë‹¤.</p>

  <p style="margin:0 0 3px 0;"><strong>[ì§„í–‰ ê°€ëŠ¥ ì¼ì •/ì¥ì†Œ]</strong></p>
  <div style="padding-left:5px; margin:0 0 3px 0;">
  <p style="margin:0 0 3px 0;">- ìœ í˜• : 2ì°¨(ìµœì¢…) ì¸í„°ë·° (C-level ì°¸ì—¬)</p>
  <p style="margin:0 0 3px 0;">- í¬ì§€ì…˜ : ${roleHtml(v)}</p>
  <p style="margin:0 0 3px 0;">- ì¥ì†Œ : ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 129, ë¹—ì¸ê¸ˆìœµíƒ€ì›Œ 8ì¸µ</p>
  <p style="margin:0 0 3px 0;">- ì¼ì‹œ : í•˜ë‹¨ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê°€ëŠ¥í•œ ì¼ì •ì„ ì œì¶œí•´ì£¼ì„¸ìš”.<br />
  <span style="color: #888888; font-size: 0.9em;">(*ë§í¬ê°€ ì—´ë¦¬ì§€ ì•ŠëŠ”ë‹¤ë©´, ì‹œí¬ë¦¿ ì°½ì—ì„œ ì—´ì–´ë³´ì„¸ìš”.)</span>
</p> </div>
  ${getScheduleButtonHtml(v, k)}
  <p style="margin:0 0 3px 0;">ì§€ë‚œë²ˆì²˜ëŸ¼ í˜¹ì‹œ í•´ë‹¹ ì¼ì‹œ ë° ì‹œê°„ëŒ€ê°€ ì–´ë ¤ìš°ì‹œë‹¤ë©´, ê°€ëŠ¥í•œ ì‹œê°„ì„ í•¨ê»˜ ê³µìœ í•´ ì£¼ì‹œë©´ ì¡°ìœ¨í•˜ì—¬ ì§„í–‰í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>
  <p style="margin:0 0 14px 0;">${nameFull(v)}ë‹˜ì˜ ë›°ì–´ë‚œ ì—­ëŸ‰ì„ ë” ê¹Šê²Œ ì•Œì•„ê°€ ë³¼ ìˆ˜ ìˆì„ ìë¦¬ê°€ ë  ê²ƒ ê°™ì•„ ê¸°ì˜ê²Œ ìƒê°í•˜ê³  ìˆìŠµë‹ˆë‹¤. :)</p>

  <p style="margin:0;">ê°ì‚¬í•©ë‹ˆë‹¤.<br />í”¼ì²˜ë§ ì±„ìš©íŒ€ ë“œë¦¼.</p>
`),

      scheduleConfirm: (v) => { const role = roleHtml(v); return wrapEmail(`
  <p style="margin:0 0 3px 0;"><strong>[Featuring]</strong></p>
  <p style="margin:0 0 3px 0;">ë¹ ë¥´ê²Œ ì¼ì • í™•ì¸ í›„ íšŒì‹ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ${nameBody(v)}ë‹˜.</p>
  <p style="margin:0 0 14px 0;">ë§ì”€ì£¼ì‹  ì¼ìë¡œ í™•ì •í•˜ì—¬ ì•ˆë‚´ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤. :)</p>

  <p style="margin:0 0 3px 0;"><strong>[í™•ì • ì¼ì • ì•ˆë‚´]</strong></p>
    <div style="padding-left:5px; margin:0 0 3px 0;">
    <p style="margin:0 0 3px 0;">- í¬ì§€ì…˜ : ${roleHtml(v)}</p>
    <p style="margin:0 0 3px 0;">- ì¥ì†Œ : ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 129, ë¹—ì¸ê¸ˆìœµíƒ€ì›Œ 8ì¸µ</p>
      <div style="padding-left:8px; margin:0 0 3px 0;">
       <p style="margin:0 5px 3px 0;">âœ… L(ë¡œë¹„)ì¸µì— ë„ì°©í•˜ì‹œì–´ ì•„ë˜ ì—°ë½ì²˜ë¡œ ì—°ë½ì£¼ì‹œë©´ ë‹´ë‹¹ìê°€ ì§ì ‘ ì•ˆë‚´ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>
       <p style="margin:0 5px 3px 0;">â“ Lì¸µì€ ì •ë¬¸ìœ¼ë¡œ ë°©ë¬¸í•˜ì‹œê²Œ ë  ê²½ìš°, ì—ìŠ¤ì»¬ë ˆì´í„°ë¥¼ íƒ€ê³  í•œ ì¸µ ì˜¬ë¼ì˜¤ì…”ì•¼ í•©ë‹ˆë‹¤.</p>    
       <p style="margin:0 5px 3px 0;">ğŸ™‹ ë‹´ë‹¹ì ì—°ë½ì²˜ : 010-7376-0490</p> </div>
    <div style="padding-left:5px; margin:0 0 3px 0;">
    <p style="margin:0 0 3px 0;">
  - ì¼ì‹œ :
  ${ v.confirmDate
      ? escapeHtml(v.confirmDate)
      : `<span style="color:#6b7280;">{ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”}</span>` }
<br />- ì§„í–‰ ì‹œê°„ : ì•½ 1ì‹œê°„ ~ ì†Œìš” ì˜ˆì •
  </div>
</div>
    <p style="margin:0 0 3px 0;">í˜¹ì—¬ í™•ì •ëœ ì¼ìê°€ ë‹¤ê°€ì˜¤ê¸° ì „ ë¶€ë“ì´ ì¼ì • ë³€ê²½ì´ í•„ìš”í•˜ì‹  ê²½ìš°, í•´ë‹¹ ë©”ì¼ë¡œ íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>
    <p style="margin:0 0 14px 0;">ì¸í„°ë·° ë‹¹ì¼ì— ì›ƒëŠ” ì–¼êµ´ë¡œ ëµ™ê² ìŠµë‹ˆë‹¤. :)</p>
  
   <p style="margin:0;">ê°ì‚¬í•©ë‹ˆë‹¤.<br />í”¼ì²˜ë§ ì±„ìš©íŒ€ ë“œë¦¼.</p>
`); },

      reference: (v) => wrapEmail(`
  <p style="margin:0 0 3px 0;"><strong>[Featuring]</strong></p>
  <p style="margin:0 0 3px 0;">ì•ˆë…•í•˜ì„¸ìš”, ${nameFull(v)}ë‹˜.</p>
  <p style="margin:0 0 14px 0;">í”¼ì²˜ë§ ì±„ìš©íŒ€ì…ë‹ˆë‹¤.</p>

  <p style="margin:0 0 3px 0;">ë‹¤ì‹œ í•œë²ˆ í”¼ì²˜ë§ ì±„ìš© í”„ë¡œì„¸ìŠ¤ì— ê´€ì‹¬ ê°€ì ¸ì£¼ì‹œê³ , ì‹œê°„ ë‚´ì–´ ì¼ì •ì— ì°¸ì—¬í•´ì£¼ì…”ì„œ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.</p> 
  <p style="margin:0 0 3px 0;">ë‹¤ìŒ ì „í˜•ì¸ ë ˆí¼ëŸ°ìŠ¤ ì²´í¬ì— ëŒ€í•œ ì•ˆë‚´ë“œë¦¬ê³ ì í•©ë‹ˆë‹¤.</p> 
  <p style="margin:0 0 14px 0;">ë ˆí¼ëŸ°ìŠ¤ ì²´í¬ ì „í˜•ì€ ì•„ë˜ì™€ ê°™ì´ ì§„í–‰ë  ì˜ˆì •ì…ë‹ˆë‹¤.</p> 

  <p style="margin:0 0 3px 0;"><strong>[ë ˆí¼ëŸ°ìŠ¤ ì²´í¬ ì „í˜• ì•ˆë‚´]</strong></p>
  <div style="padding-left:5px; margin:0 0 3px 0;">
  <p style="margin:0 0 3px 0;">- ëŒ€ìƒ : ì§€ì • 1~2ëª… (íŒ€ ë¦¬ë” ìš°ì„ )</p>
  <p style="margin:0 0 3px 0;">- ì§„í–‰ë°©ì‹ : ìœ ì„  ì¸í„°ë·°</p>
  <p style="margin:0 0 14px 0;">- ì§„í–‰ì¼ì • : ëŒ€ìƒìë“¤ê³¼ ê°œë³„ ë…¼ì˜í•˜ì—¬ ì°¨ì£¼ê¹Œì§€ ì§„í–‰ ì˜ˆì •</p>
  </div>

  <p style="margin:0 0 3px 0;">ë ˆí¼ëŸ°ìŠ¤ ì²´í¬ ì§„í–‰ì„ ìœ„í•˜ì—¬ ì „ì ì„œëª…ì„ í†µí•´ ë™ì˜ì„œ ì„œëª…ì„ ìš”ì²­ë“œë¦´ ì˜ˆì •ì´ë©°,</p> 
  <p style="margin:0 0 14px 0;">ë ˆí¼ëŸ°ìŠ¤ ì²´í¬ ì§„í–‰ì— ëŒ€í•œ ë™ì˜ ì—¬ë¶€ì™€ ì§„í–‰ì„ ì›í•˜ì‹œëŠ” ì§€ì •ì¸ 1~2ëª…ì˜ ì •ë³´(ì´ë¦„, ê´€ê³„, ì „í™”ë²ˆí˜¸)ë¥¼ í¬í•¨í•˜ì—¬ í•´ë‹¹ ë™ì˜ì„œ ì‘ì„±ì„ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p> 

  <p style="margin:0 0 14px 0;">ê¼­ ì§ì „ íšŒì‚¬ì˜ ë™ë£Œì¼ í•„ìš”ëŠ” ì—†ì§€ë§Œ ê¸°ë³¸ì ìœ¼ë¡œ  ${nameBody(v)}ë‹˜ë‹˜ê³¼ ìµœì†Œí•œ 3ê°œì›” ì´ìƒ ê¸´ë°€í•˜ê²Œ í˜‘ì—…ì„ í•œ ê²½í—˜ì´ ìˆëŠ” ë™ë£Œë“¤ë¡œ ì „ë‹¬ì„ ë¶€íƒ ë“œë¦¬ë©°, í˜‘ì—… í–ˆë˜ ì§ì† ìƒì‚¬(C-level)ë¥¼ í•„ìˆ˜ë¡œ 1ëª… í¬í•¨í•˜ì—¬ ì „ë‹¬í•´ì£¼ì„¸ìš”.</p> 

  <p style="margin:0 0 14px 0;">í˜„ì¬ ì¬ì§ ì¤‘ì¸ íšŒì‚¬ì— ì´ì§ ë° í‡´ì‚¬ ì‚¬ì‹¤ì„ ë°íˆì§€ ì•Šì•„, í•´ë‹¹ ì¡°ì§ì˜ ë™ë£Œ ë¶„ì—ê²Œ ë ˆí¼ëŸ°ìŠ¤ ì²´í¬ê°€ ì§„í–‰ë˜ì§€ ì•Šê¸°ë¥¼ ë°”ë¼ì‹œëŠ” ê²½ìš°ì—ëŠ” ë³¸ ë©”ì¼ì— ë§ì”€í•´ì£¼ì‹œë©´ ì°¸ê³ í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ ì§„í–‰í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p> 

  <p style="margin:0 0 14px 0; color:#b91c1c; font-style:italic; font-size:12px;">
  (*ë³¸ ë ˆí¼ëŸ°ìŠ¤ ì²´í¬ë¥¼ í†µí•´ ì–»ì€ ì •ë³´ëŠ” ë‹¹ì‚¬ì˜ ì±„ìš© ì´ì™¸ì— ë‹¤ë¥¸ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒì„ ì•ˆë‚´ ë“œë¦½ë‹ˆë‹¤.)
  </p>

  <p style="margin:0 0 14px 0;">ê´€ë ¨í•˜ì—¬ ê¶ê¸ˆí•œ ì ì€ ì–¸ì œë“  í¸í•˜ê²Œ í•´ë‹¹ ë©”ì¼ì„ í†µí•´ ë¬¸ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p> 
  
  <p style="margin:0;">ê°ì‚¬í•©ë‹ˆë‹¤.<br />í”¼ì²˜ë§ ì±„ìš©íŒ€ ë“œë¦¼.</p>
`),
      
finalNotice: (v) => {
  const titleText = `${nameFull(v)}ë‹˜, ìµœì¢… í•©ê²©ì„ ì§„ì‹¬ìœ¼ë¡œ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤! ğŸ‰`;

  // í™•ì •ì¼ì: "YYYY-MM-DD (ìš”ì¼)"ê¹Œì§€ë§Œ ë³´ì—¬ì£¼ê³ , ì‹œê°„ì€ 10ì‹œ ê³ ì • í‘œê¸°
  const startDateOnly = v.confirmDate
  ? escapeHtml(v.confirmDate.replace(/\s+\d{2}:\d{2}\s*$/, ''))
  : `<span style="color:#6b7280;">{í™•ì • ì¼ì}</span>`;

  // ì—°ë´‰(ë§Œì›)
  const salaryHtml = v.salary
    ? `${escapeHtml(v.salary)}`
    : `<span style="color:#6b7280;">{ê¸ˆì•¡}</span>`;

  // ë¶€ì„œ
  const deptHtml = v.dept
    ? `${escapeHtml(v.dept)}`
    : `<span style="color:#6b7280;">{ë¶€ì„œëª…}</span>`;

  // ì—…ë¬´ ë¦¬ìŠ¤íŠ¸ (ì¤„ë°”ê¿ˆ â†’ <li>)
  function dutiesListHtml(raw){
    const lines = String(raw || '')
      .split(/\r?\n/)
      .map(s => s.trim())
      .filter(Boolean);

    if (!lines.length) {
      return `<li style="margin:0; color:#6b7280;">{ì—…ë¬´ë‚´ìš©}</li>`;
    }

    return lines.map((t, idx) => {
      const mb = idx === lines.length - 1 ? '0' : '6px';
      return `<li style="margin:0 0 ${mb} 0;">${escapeHtml(t)}</li>`;
    }).join('');
  }

  const mailtoHref =
    "mailto:recruit@featuring.in?subject=%EC%98%A4%ED%8D%BC%EB%A0%88%ED%84%B0%20%EC%88%98%EB%9D%BD%ED%95%A9%EB%8B%88%EB%8B%A4&body=%EB%82%B4%EC%9A%A9%EC%9D%84%20%EC%9E%85%EB%A0%A5%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94";

  // (ì¸í„´ì‹­ì¼ ë•Œ ë¬¸êµ¬ ì•½ê°„ ë¶„ê¸° - ì›ì¹˜ ì•Šìœ¼ë©´ ì•„ë˜ ë¶„ê¸° ì œê±°í•´ë„ ë¨)
  const section2Lines = v.isIntern
    ? `
      <div style="margin:0 0 6px 0;">âœ… <strong>ì…ì‚¬(ì‹œì‘) ì˜ˆì •ì¼</strong> : ${startDateOnly}</div>
      <div style="margin:0 0 6px 0;">- ê°œì¸ ìƒí™©ì— ë”°ë¼ ìƒí˜¸ í˜‘ì˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
      <div style="margin:0 0 6px 0;">- ì¸í„´ì‹­ ê¸°ê°„ 3ê°œì›” (í”„ë¡œê·¸ë¨ ê·œì •ì— ë”°ë¦„)</div>
      <div style="margin:0 0 6px 0;">- ì¸í„´ì‹­ ì¢…ë£Œ í›„ í‰ê°€ ë° í˜‘ì˜ë¥¼ í†µí•´ ì •ê·œì§ ì „í™˜ì„ ì œì•ˆë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
    `
    : `
      <div style="margin:0 0 6px 0;">âœ… <strong>ì…ì‚¬ ì˜ˆì •ì¼</strong> : ${startDateOnly}</div>
      <div style="margin:0 0 6px 0;">- ê°œì¸ ìƒí™©ì— ë”°ë¼ ìƒí˜¸ í˜‘ì˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
      <div style="margin:0 0 6px 0;">- ì‹œìš©ê¸°ê°„ 3ê°œì›” (ê¸‰ì—¬ 100% ì§€ê¸‰)</div>
      <div style="margin:0 0 6px 0;">- ëª¨ë“  ì„ì§ì›ì€ 3ê°œì›” ì‹œìš© ê³„ì•½ í›„ í‰ê°€ë¥¼ í†µí•´ ì •ê·œì§ ì „í™˜ë©ë‹ˆë‹¤.</div>
    `;

  const section1SalaryBlock = v.isIntern
    ? `
      <div style="font-size:14px; line-height:1.7; color:#111111;">
        <div style="margin:0 0 6px 0;">
          <span style="display:block; font-size:18px; font-weight:900; color:#5e51ff; letter-spacing:-0.02em;">
            ì¸í„´ì‹­ ë³´ìˆ˜ëŠ” í”„ë¡œê·¸ë¨ ê·œì •ì— ë”°ë¦…ë‹ˆë‹¤.
          </span>
        </div>
      </div>
    `
    : `
      <div style="font-size:14px; line-height:1.7; color:#111111;">
        <div style="margin:0 0 6px 0;">
          <span style="display:block; font-size:22px; font-weight:900; color:#5e51ff; letter-spacing:-0.02em;">
            ì—°ë´‰ ${salaryHtml}ë§Œì›
          </span>
          <span style="display:block; margin-top:2px; color:#4b5563;">
            (ì„¸ì „)
          </span>
        </div>
      </div>
    `;

  return `
<div style="display:none; max-height:0px; overflow:hidden; opacity:0; color:transparent; mso-hide:all;">
  ìµœì¢… í•©ê²© ì•ˆë‚´ ë° ì˜¤í¼ë ˆí„° ì „ë‹¬ë“œë¦½ë‹ˆë‹¤. í™•ì¸ í›„ ìˆ˜ë½ íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.
</div>

<table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:0; padding:0; width:100%; background-color:#f6f7fb;">
  <tr>
    <td align="center" style="padding:24px 12px; background-color:#f6f7fb;">

      <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="600" style="width:600px; max-width:600px; background-color:#ffffff; border:1px solid #e7e9f3; border-radius:16px; box-shadow:0 10px 28px rgba(17,17,17,0.08);">
        <tr>
          <td style="padding:28px 24px 18px 24px; font-family:'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic','Segoe UI',Arial,sans-serif; color:#111111;">

            <!-- Header -->
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="width:100%;">
              <tr>
                <td valign="top" style="padding:0;">
                  <div style="font-size:26px; font-weight:800; line-height:1.25; letter-spacing:-0.02em; margin:0 0 10px 0;">
                    ${titleText}
                  </div>

                  <div style="font-size:14px; line-height:1.6; color:#4b5563;">
                    <span style="display:inline-block; padding:6px 10px; border-radius:999px; background-color:rgba(94,81,255,0.10); color:#3f35ff; font-weight:700;">
                      Offer Letter
                    </span>
                    <span style="display:inline-block; margin-left:8px;">
                      ê¸¸ì—ˆë˜ í”¼ì²˜ë§ì˜ ì±„ìš© í”„ë¡œì„¸ìŠ¤ì— ì ê·¹ ì‘í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ìµœì¢… ì¸í„°ë·° ê²°ê³¼ í•©ê²©ì„ ì•ˆë‚´ë“œë¦¬ë©°, ì˜¤í¼ ë ˆí„°ë¥¼ ì „ë‹¬ë“œë¦½ë‹ˆë‹¤.
                    </span>
                  </div>
                </td>

                <td align="right" valign="top" style="width:48px; padding:0;">
                  <div style="width:40px; height:40px; border-radius:14px; background-color:transparent; display:flex; align-items:center; justify-content:center;">
                    <img
                      src="${getLogoImageSrc()}"
                      width="40" height="40"
                      alt="Featuring"
                      style="display:block; width:40px; height:40px; border:0;"
                    />
                  </div>
                </td>
              </tr>
            </table>

            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr><td style="border-top:1px solid #e5e7eb; font-size:0; line-height:0;">&nbsp;</td></tr>
            </table>

            <!-- Disclaimer (subtle) -->
            <div style="margin:18px 0 0 0; padding:10px 12px; border-radius:12px; background-color:#f3f4f6; border:1px solid #e5e7eb; color:#4b5563; font-size:12px; line-height:1.6;">
              *ì•„ë˜ ì˜¤í¼ë ˆí„°ì— ìŠ¹ë‚™ íšŒì‹ ì„ ì£¼ì…”ì•¼ ì…ì‚¬ê°€ ìµœì¢… í™•ì •ë©ë‹ˆë‹¤. ë³¸ ë‚´ìš©ì€ ìƒí˜¸ í˜‘ì˜ í•˜ì— ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </div>

            <!-- Section 1 -->
<table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
  <tr>
    <!-- âœ… ì—¬ê¸° ìˆ˜ì •: vertical-align + padding-top ì•½ê°„ -->
    <td valign="top" style="width:34px; padding:2px 10px 0 0; vertical-align:top;">
      <div style="width:28px; height:28px; border-radius:999px; background-color:#5e51ff; color:#ffffff; text-align:center; line-height:28px; font-weight:800;">1</div>
    </td>

    <!-- âœ… ì—¬ê¸°ë„ vertical-align ê°•ì œ -->
    <td valign="top" style="padding:0; vertical-align:top;">
      <!-- âœ… ì—¬ê¸° ìˆ˜ì •: line-heightë¥¼ 28pxë¡œ -->
      <div style="font-size:16px; font-weight:800; margin:0 0 8px 0; line-height:28px;">ì œì•ˆ ì—°ë´‰</div>

      <!-- ê¸°ì¡´ salary block ê·¸ëŒ€ë¡œ -->
      ${section1SalaryBlock}
    </td>
  </tr>
</table>


            <!-- Section 2 -->
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr>
                <td valign="top" style="width:34px; padding:0 10px 0 0;">
                  <div style="width:28px; height:28px; border-radius:999px; background-color:#5e51ff; color:#ffffff; text-align:center; line-height:28px; font-weight:800;">2</div>
                </td>
                <td valign="top" style="padding:0;">
                  <div style="font-size:16px; font-weight:800; margin:0 0 8px 0;">ì…ì‚¬ ì¼ì • ë° ê·¼ë¬´ í˜•íƒœ</div>

                  <div style="font-size:14px; line-height:1.7; color:#111111;">
                    ${section2Lines}
                  </div>
                </td>
              </tr>
            </table>

            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr><td style="border-top:1px solid #e5e7eb; font-size:0; line-height:0;">&nbsp;</td></tr>
            </table>

            <!-- Section 3 -->
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr>
                <td valign="top" style="width:34px; padding:0 10px 0 0;">
                  <div style="width:28px; height:28px; border-radius:999px; background-color:#5e51ff; color:#ffffff; text-align:center; line-height:28px; font-weight:800;">3</div>
                </td>
                <td valign="top" style="padding:0;">
                  <div style="font-size:16px; font-weight:800; margin:0 0 8px 0;">ì†Œì† ë° ì£¼ìš” ì—…ë¬´</div>

                  <div style="font-size:14px; line-height:1.7; color:#111111;">
                    <div style="margin:0 0 10px 0;">âœ… <strong>ì†Œì†</strong> : ${deptHtml}</div>

                    <div style="font-size:13px; line-height:1.7; color:#4b5563; margin:0 0 8px 0;">
                      ì•„ë˜ ì£¼ìš” ì—…ë¬´ ë‚´ìš©ì„ í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
                    </div>

                    <ul style="margin:0; padding:0 0 0 18px; font-size:14px; line-height:1.7; color:#111111;">
                      ${dutiesListHtml(v.duties)}
                    </ul>
                  </div>
                </td>
              </tr>
            </table>

            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr><td style="border-top:1px solid #e5e7eb; font-size:0; line-height:0;">&nbsp;</td></tr>
            </table>

            <!-- CTA -->
            <div style="margin:18px 0 0 0;">
              <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="width:100%;">
                <tr>
                  <td align="center" style="padding:0;">
                    <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="width:100%;">
                      <tr>
                        <td align="center" bgcolor="#5e51ff" style="border-radius:12px;">
                          <a
                            href="${mailtoHref.replace('&', '&amp;')}"
                            style="display:block; padding:14px 16px; font-family:'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic','Segoe UI',Arial,sans-serif; font-size:16px; font-weight:900; color:#ffffff; text-decoration:none;"
                          >
                            ì˜¤í¼ë ˆí„° í™•ì¸ ë° ìˆ˜ë½ ë©”ì¼ ë³´ë‚´ê¸°
                          </a>
                        </td>
                      </tr>
                    </table>

                    <div style="margin:10px 0 0 0; font-size:12px; line-height:1.6; color:#6b7280;">
                      ë²„íŠ¼ì´ ì—´ë¦¬ì§€ ì•Šìœ¼ë©´ ì•„ë˜ ë©”ì¼ ì£¼ì†Œë¡œ <strong>â€œì˜¤í¼ë ˆí„° ìˆ˜ë½í•©ë‹ˆë‹¤â€</strong> ì œëª©ìœ¼ë¡œ íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br />
                      <span style="color:#111111;">recruit@featuring.in</span>
                    </div>
                  </td>
                </tr>
              </table>
            </div>

            <div style="margin:18px 0 0 0; font-size:13px; line-height:1.7; color:#111111;">
              ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  í¸í•˜ê²Œ íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br />
              ê°ì‚¬í•©ë‹ˆë‹¤.<br />
              í”¼ì²˜ë§ ì±„ìš©íŒ€ ë“œë¦¼
            </div>

          </td>
        </tr>
      </table>

      <div style="height:10px; line-height:10px; font-size:0;">&nbsp;</div>
      <div style="font-family:'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic','Segoe UI',Arial,sans-serif; font-size:11px; line-height:1.6; color:#9ca3af; text-align:center;">
        Â© Featuring. This email contains offer letter information.
      </div>

    </td>
  </tr>
</table>
  `;
},




reject: (v) => wrapEmail(`
 <p style="margin:0 0 3px 0;"><strong>[Featuring]</strong></p>
  <p style="margin:0 0 3px 0;">ì•ˆë…•í•˜ì„¸ìš”, ${nameFull(v)}ë‹˜.</p>
  <p style="margin:0 0 14px 0;">í”¼ì²˜ë§ ì±„ìš©íŒ€ì…ë‹ˆë‹¤.</p>

  <p style="margin:0 0 3px 0;">ë¨¼ì € í”¼ì²˜ë§ì— ì§€ì›í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>
  <p style="margin:0 0 14px 0;">í˜¹ì‹œ ì±„ìš© í”„ë¡œì„¸ìŠ¤ê°€ ì§„í–‰ë˜ëŠ” ì¤‘ ì €í¬ê°€ ì˜ë„ì¹˜ ì•Šê²Œ ë¶ˆí¸ì„ ë“œë¦° ì ì€ ì—†ì—ˆëŠ”ì§€ ì—¬ëŸ¬ëª¨ë¡œ ë§ˆìŒì´ ì“°ì…ë‹ˆë‹¤.</p>
  
  <p style="margin:0 0 14px 0;">${nameBody(v)}ë‹˜ê»˜ëŠ” ì•ˆíƒ€ê¹ê²Œë„ ì´ë²ˆ ì§€ì›ì—ì„œëŠ” ì „í˜• í•©ê²©ì˜ ê¸°ìœ ì†Œì‹ì„ ì „í•´ë“œë¦¬ì§€ ëª»í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>

  <p style="margin:0 0 14px 0;">ì–¸ì  ê°€ë¶€í„° ì·¨ì—…ê³¼ ì´ì§ ê·¸ ìì²´ê°€ ëª©ì ì´ê³  ê¿ˆì´ ë˜ì–´ë²„ë¦° ì‚­ë§‰í•œ ì·¨ì—… í™˜ê²½ ê°€ìš´ë° ë§¤ì¼ì„ ê³ êµ°ë¶„íˆ¬í•˜ë©° ìì‹ ê³¼ì˜ ì‹¸ì›€ì„ ì´ê²¨ë‚´ëŠ” ì—¬ëŸ¬ë¶„ë“¤ê»˜ ê·¸ ì–´ë–¤ ë§ë¡œë„ ì˜¨ì „í•œ ìœ„ë¡œë¥¼ ê±´ë„¬ ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ìµíˆ ì•Œê³  ìˆìŠµë‹ˆë‹¤.</p>

  <p style="margin:0 0 14px 0;">ë¹„ë¡ ì´ë²ˆ ì „í˜•ì„ í†µí•´ ${nameBody(v)}ë‹˜ê³¼ ì¢‹ì€ ì¸ì—°ìœ¼ë¡œ í•¨ê»˜ í•˜ì§€ëŠ” ëª»í•˜ì§€ë§Œ,<br />ìŠ¤ìŠ¤ë¡œ ê¿ˆê¾¸ëŠ” ë°ì€ ë¯¸ë˜ëŠ” ë°˜ë“œì‹œ ì‹¤í˜„ë˜ë¦¬ë¼ ë¯¿ìœ¼ë©° ì§„ì‹¬ ì–´ë¦° ì‘ì›ì˜ ë§ˆìŒì„ ì „í•´ë“œë¦½ë‹ˆë‹¤.</p>

  <p style="margin:0 0 14px 0;">í–¥í›„ ë˜ ë‹¤ë¥¸ ê²½ë¡œë¡œ ${nameBody(v)}ë‹˜ì„ ë‹¤ì‹œ ë§Œë‚˜ ëµ ìˆ˜ ìˆê¸°ë¥¼ ë°”ë¼ë©° ì•ìœ¼ë¡œ í¼ì³ì§ˆ ì‚¶ì— ì„±ì¥ê³¼ í–‰ë³µì´ í•¨ê»˜í•˜ê¸°ë¥¼ ê¸°ì›í•©ë‹ˆë‹¤.</p>

  <p style="margin:0 0 14px 0;"></p>

  <p style="margin:0 0 3px 0;">ì–¸ì œë‚˜ ê±´ê°• ìœ ì˜í•˜ì‹œê³ , ë¹›ë‚˜ëŠ” í•˜ë£¨ ë˜ì‹œê¸° ë°”ëë‹ˆë‹¤.<br />ì–¸ì  ê°€ ì¸ì—°ì´ ë‹¿ì•„ ë‹¤ì‹œ ëµ ìˆ˜ ìˆì„ ë‚ ì„ ê³ ëŒ€í•˜ë©°, ${nameBody(v)}ë‹˜ì˜ ì•ê¸¸ì— ê½ƒê¸¸ë§Œì´ ê°€ë“í•˜ê¸¸ ê¸°ì›í•©ë‹ˆë‹¤.</p>
  <p style="margin:0;">ê°ì‚¬í•©ë‹ˆë‹¤.<br />í”¼ì²˜ë§ ì±„ìš©íŒ€ ë“œë¦¼.</p>
`),

      onboarding: (v) => {
        const name = escapeHtml((v.name || '').trim());
        const position = escapeHtml((v.position || '').trim());

          // í™•ì •ì¼ì(c1)ì—ì„œ "YYYY-MM-DD (ìš”ì¼)"ê¹Œì§€ë§Œ ë³´ì—¬ì£¼ê³ , ì‹œê°„ì€ 10ì‹œë¡œ ê³ ì • í‘œê¸°
        const startDate = v.confirmDate
          ? escapeHtml(v.confirmDate.replace(/\s+\d{2}:\d{2}\s*$/, ''))   // ë’¤ "HH:MM" ì œê±°
          : `<span style="color:#6b7280;">{ì…ì‚¬ì¼ì}</span>`;

        const formUrl = v.isIntern
        ? ((typeof ONBOARDING_FORM_URL_INTERN !== 'undefined' && ONBOARDING_FORM_URL_INTERN)
        ? ONBOARDING_FORM_URL_INTERN
        : "https://tally.so/r/eqRpbQ")
        : ((typeof ONBOARDING_FORM_URL_REGULAR !== 'undefined' && ONBOARDING_FORM_URL_REGULAR)
        ? ONBOARDING_FORM_URL_REGULAR
          : "https://tally.so/r/jaPpr6");

        const cultureUrl = (typeof CULTURE_GUIDE_URL !== 'undefined' && CULTURE_GUIDE_URL)
          ? CULTURE_GUIDE_URL
          : "https://teamfeaturing.notion.site/Featuring-Culture-Guide-df09fd30889a42e3845c7802d316b184?source=copy_link";
    
const titleText = v.isIntern
    ? `${nameFull(v)}ë‹˜, <br />í”¼ì²˜ë§ì˜ ì¸í„´ì‹­ í•©ë¥˜ë¥¼<br />ì§„ì‹¬ìœ¼ë¡œ ì¶•í•˜í•˜ê³  í™˜ì˜í•©ë‹ˆë‹¤.`
    : `${nameFull(v)}ë‹˜, <br />í”¼ì²˜ë§ì˜ ìƒˆë¡œìš´ êµ¬ì„±ì›ì´ ë˜ì‹  ê²ƒì„<br />ì§„ì‹¬ìœ¼ë¡œ ì¶•í•˜í•˜ê³  í™˜ì˜í•©ë‹ˆë‹¤.`;

  const periodBlock = v.isIntern
    ? `
      <div style="margin:0 0 6px 0;">âœ… ì¸í„´ì‹­ ê¸°ê°„ : 3ê°œì›”</div>
      <div style="margin:10px 0 0 0; color:#4b5563; font-size:11px; line-height:1.6;">
        1) ì¸í„´ì‹­ ì¢…ë£Œ í›„, ì‚¬ë‚´ ê·œì •ì— ì˜ê±°í•œ í‰ê°€ ë° ìŒë°© í˜‘ì˜ë¥¼ í†µí•´ ì •ê·œì§ ì „í™˜ ê³„ì•½ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
        2) ëª¨ë“  ì¸ì‚¬ê·œì •ì€ ìµœì´ˆì…ì‚¬ì¼ ê¸°ì¤€ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.
      </div>
    `
    : `
      <div style="margin:0 0 6px 0;">âœ… ì‹œìš©ê¸°ê°„ : 3ê°œì›”</div>
      <div style="margin:10px 0 0 0; color:#4b5563; font-size:11px; line-height:1.6;">
        1) ì‹œìš©ê¸°ê°„ ì¢…ë£Œ í›„, ì‚¬ë‚´ ê·œì •ì— ì˜ê±°í•œ í‰ê°€ ë° ìŒë°© í˜‘ì˜ë¥¼ í†µí•´ ìˆ˜ìŠµ í•´ì œ ì ˆì°¨ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.<br />
           ì´ì— ê·¼ë¬´í˜•íƒœì™€ ë¬´ê´€í•˜ê²Œ ëª¨ë“  ì„ì§ì›ì˜ ì²« ê³„ì•½ì€ ë§Œ 3ê°œì›” ì‹œìš© ê³„ì•½ì§ìœ¼ë¡œ ê³„ì•½ í›„, ì •ê·œì§ ê³„ì•½ìœ¼ë¡œ ì „í™˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br />
        2) ëª¨ë“  ì¸ì‚¬ê·œì •ì€ ìµœì´ˆì…ì‚¬ì¼ ê¸°ì¤€ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.
      </div>
    `;

  const extraDocsBlock = v.isIntern
    ? '' // ì¸í„´ì€ í•´ë‹¹ ì¸ì› ì„œë¥˜ ì„¹ì…˜ ìì²´ ì œê±°
    : `
      <div style="height:14px; line-height:14px; font-size:0;">&nbsp;</div>

      <div style="font-size:15px; font-weight:800; margin:0 0 10px 0;">í•´ë‹¹ ì¸ì› ì„œë¥˜ ì•ˆë‚´ (ê²½ë ¥ì…ì‚¬ê°€ ì•„ë‹Œ ê²½ìš° ì œì™¸)</div>

      <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="width:100%; border:1px solid #e7e9f3; border-radius:12px; overflow:hidden;">
        <tr>
          <td style="padding:10px 12px; background-color:rgba(94,81,255,0.14); font-weight:800; font-size:13px; color:#111111; border-bottom:1px solid #e7e9f3;">êµ¬ë¹„ ì„œë¥˜</td>
          <td style="padding:10px 12px; background-color:rgba(94,81,255,0.14); font-weight:800; font-size:13px; color:#111111; border-bottom:1px solid #e7e9f3;">êµ¬ë¶„</td>
          <td style="padding:10px 12px; background-color:rgba(94,81,255,0.14); font-weight:800; font-size:13px; color:#111111; border-bottom:1px solid #e7e9f3;">ë¶€ìˆ˜</td>
          <td style="padding:10px 12px; background-color:rgba(94,81,255,0.14); font-weight:800; font-size:13px; color:#111111; border-bottom:1px solid #e7e9f3;">ë¹„ê³ </td>
        </tr>

        <tr>
          <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ê²½ë ¥ì¦ëª…ì„œ</td>
          <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ì›ë³¸</td>
          <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ê° 1</td>
          <td style="padding:12px; font-size:12px; color:#4b5563; border-bottom:1px solid #eef0f7;">
            ìµœê·¼ 5ë…„ ë‚´ ì§ì¥ ì§ì¸ í•„ìš”<br />
            <span style="color:#5e51ff; font-weight:800; font-size:11px; line-height:1.4;">*ë°œê¸‰ì´ ì–´ë ¤ìš¸ ì‹œ ì‚¬ìœ ì™€ í•¨ê»˜ íšŒì‹  ë°”ëë‹ˆë‹¤.</span>
          </td>
        </tr>

        <tr>
          <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ê·¼ë¡œì†Œë“ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦</td>
          <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ì›ë³¸</td>
          <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ê° 1</td>
          <td style="padding:12px; font-size:12px; color:#4b5563; border-bottom:1px solid #eef0f7;">ì§ì „ ê·¼ë¬´ì§€, ë‹¹í•´ì—°ë„ í¬í•¨ 3ë…„ì¹˜</td>
        </tr>

        <tr>
          <td style="padding:12px; font-size:13px;">ê°€ì¡±ê´€ê³„ì¦ëª…ì„œ (ìƒì„¸)</td>
          <td style="padding:12px; font-size:13px;">ë³¸ì¸</td>
          <td style="padding:12px; font-size:13px;">1</td>
          <td style="padding:12px; font-size:12px; color:#4b5563;">
            ë¶€ì–‘ê°€ì¡± ë“±ë¡ ì‹œ, ë¶€ì–‘ì ë³¸ì¸ ì„œë¥˜<br />
            <span style="color:#5e51ff; font-weight:800; font-size:11px; line-height:1.4;">*ì£¼ë¯¼ë²ˆí˜¸ ë’·ìë¦¬ í¬í•¨ í•„ìˆ˜</span>
          </td>
        </tr>
      </table>
    `;

  const deviceBlock = v.isIntern
    ? `
      <div style="margin:0 0 8px 0; padding:10px 12px; border-radius:12px; background-color:#fff1f2; border:1px solid #fecdd3; color:#b91c1c; font-weight:900; font-size:13px; line-height:1.7;">
        ì¸í„´ì‹­ ì°¸ì—¬ìì—ê²ŒëŠ” ë©íƒ‘ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ê°œì¸ ë©íƒ‘ ì§€ì°¸ í•„ìˆ˜)
      </div>
      <div style="font-size:13px; line-height:1.7; color:#111111;">
        - <strong>ê°œì¸ ë©íƒ‘ ì§€ì°¸</strong>: Windows/Mac ë¬´ê´€<br />
        - <strong>ê¸°ë³¸ ì§€ì› ì¥ë¹„</strong>: ëª¨ë‹ˆí„° 1ëŒ€, ëª¨ë‹ˆí„° ì—°ê²° í—ˆë¸Œ(MAC)<br />
        <span style="color:#6b7280; font-size:12px;">(*ë§ˆìš°ìŠ¤, í‚¤ë³´ë“œ ë“± ê°œì¸ ì¥ë¹„ëŠ” ì§€ì°¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.)</span>
      </div>
    `
    : `
      <div style="font-size:13px; line-height:1.7; color:#111111;">
        - <strong>ê¸°ë³¸ ì§€ì› ì¥ë¹„</strong>: ë©íƒ‘ 1ëŒ€, ëª¨ë‹ˆí„° 1ëŒ€, ëª¨ë‹ˆí„° ì—°ê²° í—ˆë¸Œ(MAC)<br />
        - <strong>ìš´ì˜ì²´ì œ ì„ íƒ</strong>: Windows ë˜ëŠ” Mac<br />
        <span style="color:#6b7280; font-size:12px;">(*ë‚˜ë¨¸ì§€ ì•…ì„¸ì‚¬ë¦¬ ë° ì¥ë¹„(ë§ˆìš°ìŠ¤, í‚¤ë³´ë“œ ë“±)ëŠ” ê°œì¸ì ìœ¼ë¡œ ì¤€ë¹„í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.)</span>
      </div>
    `;

  // ìµœì¢… HTML ë°˜í™˜ (ì´ HTMLì´ ê·¸ëŒ€ë¡œ ë³µì‚¬ë˜ì–´ Gmail ë³¸ë¬¸ì— ë¶™ìŠµë‹ˆë‹¤)
  return `
<div style="display:none; max-height:0px; overflow:hidden; opacity:0; color:transparent; mso-hide:all;">
  ì…ì‚¬ ì¼ì •, ì œì¶œ ì„œë¥˜, ê³„ì •/ì¥ë¹„ ì…‹ì—… ì•ˆë‚´ ë° í•„ìˆ˜ ì œì¶œ ë§í¬ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
</div>

<table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:0; padding:0; width:100%; background-color:#f6f7fb;">
  <tr>
    <td align="center" style="padding:24px 12px; background-color:#f6f7fb;">

      <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="600" style="width:600px; max-width:600px; background-color:#ffffff; border:1px solid #e7e9f3; border-radius:16px; box-shadow:0 10px 28px rgba(17,17,17,0.08);">
        <tr>
          <td style="padding:28px 24px 18px 24px; font-family:'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic','Segoe UI',Arial,sans-serif; color:#111111;">

            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="width:100%;">
              <tr>
                <td valign="top" style="padding:0;">
                  <div style="font-size:26px; font-weight:800; line-height:1.25; letter-spacing:-0.02em; margin:0 0 10px 0;">
                    ${titleText}
                  </div>

                  <div style="font-size:14px; line-height:1.6; color:#4b5563;">
                    <span style="display:inline-block; padding:6px 10px; border-radius:999px; background-color:rgba(94,81,255,0.10); color:#3f35ff; font-weight:700;">
                      ${escapeHtml(v.position)}
                    </span>
                    <span style="display:inline-block; margin-left:8px;">
                      ${nameBody(v)}ë‹˜, ì•„ë˜ ë‚´ìš©ì„ ìì„¸í•˜ê²Œ í™•ì¸ í›„ í•˜ë‹¨ ë²„íŠ¼ì„ í†µí•´ ì •ë³´ ì œì¶œ ë°”ëë‹ˆë‹¤.
                    </span>
                  </div>
                </td>

            <td align="right" valign="top" style="width:48px; padding:0;">
<div style="width:40px; height:40px; border-radius:14px; background-color:transparent; display:flex; align-items:center; justify-content:center;">
    <img
      src="${getLogoImageSrc()}"
      width="40" height="40"
      alt="Featuring"
      style="display:block; width:40px; height:40px; border:0;"
    />
  </div>
</td>
              </tr>
            </table>

            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr><td style="border-top:1px solid #e5e7eb; font-size:0; line-height:0;">&nbsp;</td></tr>
            </table>

            <!-- ì¶œê·¼ ì•ˆë‚´ -->
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr>
                <td valign="top" style="width:34px; padding:0 10px 0 0;">
                  <div style="width:28px; height:28px; border-radius:999px; background-color:#5e51ff; color:#ffffff; text-align:center; line-height:28px; font-weight:800;">1</div>
                </td>
                <td valign="top" style="padding:0;">
                  <div style="font-size:16px; font-weight:800; margin:0 0 8px 0;">ì¶œê·¼ ì•ˆë‚´</div>

                  <div style="font-size:14px; line-height:1.7; color:#111111;">
                    <div style="margin:0 0 6px 0;">âœ… <strong>ì²« ì¶œê·¼ì¼</strong> :   ${ v.confirmDate? escapeHtml(v.confirmDate): `<span style="color:#6b7280;">{ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”}</span>` } </div>
                    <div style="margin:0 0 6px 0;">âœ… <strong>ì£¼ì†Œ</strong> : ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 129, ë¹—ì¸ê¸ˆìœµíƒ€ì›Œ 8ì¸µ</div>
                    </div>
                    <div style="font-size:11px; line-height:1.6;color#111111;">
                    <div style="margin:0 0 10px 0;">
                      ğŸ“ <strong>Lì¸µ ë„ì°© í›„</strong>
                      <span style="color:#5e51ff; font-weight:900; text-decoration:underline;">ì±„ìš©ë‹´ë‹¹ì (010-7376-0490)</span>ì—ê²Œ ì—°ë½ ì£¼ì‹œë©´ ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.<br />
                      ğŸ¥¼ ì¶œê·¼ ë³µì¥ì€ ì •í•´ì§„ ê²ƒ ì—†ì´ ììœ¨ë³µì¥ ì…ë‹ˆë‹¤.<br/>
                      ğŸ“§ ì…ì‚¬ ë‹¹ì¼, ê°œì¸ ì´ë©”ì¼ë¡œ ì‚¬ë‚´ ë„¤íŠ¸ì›Œí¬/ì‚¬ë‚´ ì‚¬ìš© ë©”ì¼ ì•ˆë‚´ë¥¼ ë“œë¦´ ì˜ˆì •ì…ë‹ˆë‹¤. :)
                    </div>
                  </div>
                </td>
              </tr>
            </table>

            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr><td style="border-top:1px solid #e5e7eb; font-size:0; line-height:0;">&nbsp;</td></tr>
            </table>

            <!-- ì—°ë´‰/ê¸°ê°„ -->
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr>
                <td valign="top" style="width:34px; padding:0 10px 0 0;">
                  <div style="width:28px; height:28px; border-radius:999px; background-color:#5e51ff; color:#ffffff; text-align:center; line-height:28px; font-weight:800;">2</div>
                </td>
                <td valign="top" style="padding:0;">
                  <div style="font-size:16px; font-weight:800; margin:0 0 8px 0;">ì—°ë´‰ ë° ê¸°ê°„ ì•ˆë‚´</div>

                  <div style="font-size:14px; line-height:1.7; color:#111111;">
                    <div style="margin:0 0 6px 0;">âœ… <strong>ì—°ë´‰ ìµœì¢…ì•ˆ</strong> : ìŠ¹ë‚™í•œ ì œì•ˆê³¼ ë™ì¼í•©ë‹ˆë‹¤.</div>
                    ${periodBlock}
                  </div>
                </td>
              </tr>
            </table>

            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr><td style="border-top:1px solid #e5e7eb; font-size:0; line-height:0;">&nbsp;</td></tr>
            </table>

            <!-- ì œì¶œ ì„œë¥˜ -->
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr>
                <td valign="top" style="width:34px; padding:0 10px 0 0;">
                  <div style="width:28px; height:28px; border-radius:999px; background-color:#5e51ff; color:#ffffff; text-align:center; line-height:28px; font-weight:800;">3</div>
                </td>
                <td valign="top" style="padding:0;">
                  <div style="font-size:16px; font-weight:800; margin:0 0 6px 0;">í•„ìˆ˜ ì œì¶œ ì„œë¥˜ ì•ˆë‚´</div>
                  <div style="font-size:13px; line-height:1.7; color:#4b5563; margin:0 0 12px 0;">
                    ì…ì‚¬ ì „ê¹Œì§€ ì•„ë˜ ì„œë¥˜ë¥¼ <strong>PDF íŒŒì¼</strong>ë¡œ ì œì¶œ ë°”ëë‹ˆë‹¤. <span style="color:#6b7280;">(*í•˜ë“œì¹´í”¼ëŠ” ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.)</span>
                  </div>

                  <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="width:100%; border:1px solid #e7e9f3; border-radius:12px; overflow:hidden;">
                    <tr>
                      <td style="padding:10px 12px; background-color:rgba(94,81,255,0.14); font-weight:800; font-size:13px; color:#111111; border-bottom:1px solid #e7e9f3;">êµ¬ë¹„ ì„œë¥˜</td>
                      <td style="padding:10px 12px; background-color:rgba(94,81,255,0.14); font-weight:800; font-size:13px; color:#111111; border-bottom:1px solid #e7e9f3;">êµ¬ë¶„</td>
                      <td style="padding:10px 12px; background-color:rgba(94,81,255,0.14); font-weight:800; font-size:13px; color:#111111; border-bottom:1px solid #e7e9f3;">ë¶€ìˆ˜</td>
                      <td style="padding:10px 12px; background-color:rgba(94,81,255,0.14); font-weight:800; font-size:13px; color:#111111; border-bottom:1px solid #e7e9f3;">ë¹„ê³ </td>
                    </tr>

                    <tr>
                      <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ì£¼ë¯¼ë“±ë¡ë“±ë³¸</td>
                      <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ì›ë³¸</td>
                      <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">1</td>
                      <td style="padding:12px; font-size:12px; color:#4b5563; border-bottom:1px solid #eef0f7;">
                        www.gov.kr<br />
                        <span style="color:#5e51ff; font-weight:800; font-size:11px; line-height:1.4;">*ì£¼ë¯¼ë²ˆí˜¸ ë’·ìë¦¬ í¬í•¨ í•„ìˆ˜</span>
                      </td>
                    </tr>

                    <tr>
                      <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ì‹ ë¶„ì¦</td>
                      <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">ì‚¬ë³¸</td>
                      <td style="padding:12px; font-size:13px; border-bottom:1px solid #eef0f7;">1</td>
                      <td style="padding:12px; font-size:12px; color:#4b5563; border-bottom:1px solid #eef0f7;">-</td>
                    </tr>

                    <tr>
                      <td style="padding:12px; font-size:13px;">í†µì¥ì‚¬ë³¸</td>
                      <td style="padding:12px; font-size:13px;">ì‚¬ë³¸</td>
                      <td style="padding:12px; font-size:13px;">1</td>
                      <td style="padding:12px; font-size:12px; color:#4b5563;">-</td>
                    </tr>
                  </table>

                  ${extraDocsBlock}
                </td>
              </tr>
            </table>

            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr><td style="border-top:1px solid #e5e7eb; font-size:0; line-height:0;">&nbsp;</td></tr>
            </table>

            <!-- ì¶”ê°€ í•„ìˆ˜ ì •ë³´ -->
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr>
                <td valign="top" style="width:34px; padding:0 10px 0 0;">
                  <div style="width:28px; height:28px; border-radius:999px; background-color:#5e51ff; color:#ffffff; text-align:center; line-height:28px; font-weight:800;">4</div>
                </td>
                <td valign="top" style="padding:0;">
                  <div style="font-size:16px; font-weight:800; margin:0 0 6px 0;">ì¶”ê°€ í•„ìˆ˜ ì œì¶œ ì •ë³´</div>
                  <div style="font-size:13px; line-height:1.7; color:#4b5563; margin:0 0 12px 0;">
                    ì¶”ê°€ë¡œ ì…ì‚¬ ì „ í™•ì¸ ë° ì…‹ì—…ì´ í•„ìš”í•œ ì‚¬í•­ì´ ìˆì–´ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
                  </div>

                  <div style="font-size:14px; font-weight:900; color:#5e51ff; margin:0 0 6px 0;">1. í˜¸ì¹­ ë° ê³„ì • ìƒì„±</div>
                  <div style="font-size:13px; line-height:1.7; color:#111111;">
                    - í”¼ì²˜ë§ì€ ìˆ˜í‰ì ì¸ ì¡°ì§ë¬¸í™”ë¥¼ ì§€í–¥í•˜ë©° ëª¨ë“  ë‹‰ë„¤ì„(ì˜ì–´ì´ë¦„)ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br />
                    - ë˜í•œ í•´ë‹¹ ì´ë¦„ì€ íšŒì‚¬ ê°œì¸ê³„ì •ìœ¼ë¡œ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤. (ì˜ˆ: poza@featuring.in)
                  </div>
                  <div style="margin:8px 0 0 0; padding:10px 12px; border-radius:12px; background-color:#fff7ed; border:1px solid #fde68a; font-size:13px; line-height:1.7;">
                    ğŸ‘‰ ë‹‰ë„¤ì„ì„ ì •í•œ í›„ <strong>[ì˜ë¬¸/í•œê¸€]</strong> í˜•ì‹ìœ¼ë¡œ íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.
                    <div style="margin-top:4px; color:#6b7280; font-size:12px;">
                      e.g)  Thomas/í† ë§ˆìŠ¤ &nbsp;|&nbsp; ì¤‘ë³µ/ì‚¬ìš© ë¶ˆê°€ ëŒ€ë¹„ <strong>2~3ìˆœìœ„</strong>ê¹Œì§€ ê³ ë ¤ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
                    </div>
                  </div>

                  <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:12px 0;">
                    <tr><td style="border-top:1px solid #eef0f7; font-size:0; line-height:0;">&nbsp;</td></tr>
                  </table>

                  <div style="font-size:14px; font-weight:900; color:#5e51ff; margin:0 0 6px 0;">2. ì¥ë¹„ ì•ˆë‚´ ë° ì‚¬ìš©</div>
                  ${deviceBlock}

                  <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:12px 0;">
                    <tr><td style="border-top:1px solid #eef0f7; font-size:0; line-height:0;">&nbsp;</td></tr>
                  </table>

                  <div style="font-size:14px; font-weight:900; color:#5e51ff; margin:0 0 6px 0;">3. í”¼ì²˜ë§ ë¬¸í™” ì†Œê°œì„œ</div>
                  <div style="font-size:13px; line-height:1.7; color:#111111;">
                    ì„œë¥˜ ì œì¶œ ë° í•„ìˆ˜ ì •ë³´ ì œì¶œ í›„, <br />ìµœí•˜ë‹¨ì— ë§í¬ëœ í”¼ì²˜ë§ ë¬¸í™” ì†Œê°œì„œë¥¼ í†µí•´ í•©ë¥˜ ì „ì— í”¼ì²˜ë§ì„ ë¨¼ì € ë§Œë‚˜ë³´ì„¸ìš”!
                  </div>
                  <div style="margin:10px 0 0 0; font-size:13px; line-height:1.7;">
                 <a href="${cultureUrl}" style="color:#5e51ff; text-decoration:underline; font-weight:800;">
                   â–¶ Featuring Culture Guide
                    </a>
                 </div>
                </td>
              </tr>
            </table>

            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin:18px 0 0 0;">
              <tr><td style="border-top:1px solid #e5e7eb; font-size:0; line-height:0;">&nbsp;</td></tr>
            </table>

            <!-- CTA -->
            <div style="margin:18px 0 0 0;">
              <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="width:100%;">
                <tr>
                  <td align="center" style="padding:0;">
                    <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="width:100%;">
                      <tr>
                        <td align="center" bgcolor="#5e51ff" style="border-radius:12px;">
                          <a href="${formUrl}" target="_blank"
                             style="display:block; padding:14px 16px; font-family:'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic','Segoe UI',Arial,sans-serif; font-size:16px; font-weight:900; color:#ffffff; text-decoration:none;">
                            ì…ì‚¬ í•„ìˆ˜ ì •ë³´ ë° ì„œë¥˜ ì œì¶œí•˜ê¸°
                          </a>
                        </td>
                      </tr>
                    </table>
                    <div style="margin:10px 0 0 0; font-size:12px; line-height:1.6; color:#6b7280;">
                      ë²„íŠ¼ì´ ì—´ë¦¬ì§€ ì•Šìœ¼ë©´ ì•„ë˜ URLì„ ë³µì‚¬í•´ ë¸Œë¼ìš°ì €ì— ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”.<br />
                      <span style="color:#111111;">${formUrl}</span>
                    </div>
                  </td>
                </tr>
              </table>
            </div>

            <div style="margin:18px 0 0 0; font-size:13px; line-height:1.7; color:#111111;">
              ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  í¸í•˜ê²Œ íšŒì‹  ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br />
              ê°ì‚¬í•©ë‹ˆë‹¤.<br />
              í”¼ì²˜ë§ ì±„ìš©íŒ€ ë“œë¦¼
            </div>

          </td>
        </tr>
      </table>

      <div style="height:10px; line-height:10px; font-size:0;">&nbsp;</div>
      <div style="font-family:'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic','Segoe UI',Arial,sans-serif; font-size:11px; line-height:1.6; color:#9ca3af; text-align:center;">
        Â© Featuring. This email contains onboarding information.
      </div>

    </td>
  </tr>
</table>
  `;
      }
};
    
    const subjectTemplates = {
      assignment_schedule: (v) => `[Featuring] ${subjectRole(v)} ê³¼ì œ ì „í˜• ì¼ì • ì œì•ˆë“œë¦½ë‹ˆë‹¤.`,
      task: (v) => `[Featuring] ${subjectRole(v)} ê³¼ì œ ì „í˜• ì§„í–‰ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.`,
      interview1: (v) => `[Featuring] ${subjectRole(v)} 1ì°¨ ì¸í„°ë·° ì œì•ˆë“œë¦½ë‹ˆë‹¤.`,
      interviewFinal: (v) => `[Featuring] ${subjectRole(v)} 1ì°¨ ì¸í„°ë·° ê²°ê³¼ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.`,
      scheduleConfirm: (v) => `[Featuring] ${subjectRole(v)} ì¼ì • í™•ì • ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.`,
      reference: (v) => `[Featuring] ë ˆí¼ëŸ°ìŠ¤ ì²´í¬ ì „í˜• ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.`,
      finalNotice: (v) => `[Featuring] ${nameFull(v)}ë‹˜, ìµœì¢… í•©ê²© ë° ì˜¤í¼ë ˆí„° ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.`,
      onboarding: (v) => `[Featuring] ${nameFull(v)}ë‹˜, ${subjectRole(v)} ì…ì‚¬ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.`,
      reject: (v) => `[Featuring] ${nameFull(v)}ë‹˜, ì±„ìš© ì „í˜• ê²°ê³¼ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.`
    };

  // â–¼â–¼â–¼ [ìˆ˜ì •] ì„œì‹ ë²„íŠ¼ ì´ë¦„ì„ ì‰½ê²Œ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ì •ë³´ ì¶”ê°€ â–¼â–¼â–¼
  const templateKeys = { assignment_schedule: 'ê³¼ì œ ì¼ì •', task: 'ê³¼ì œì „í˜•', interview1: '1ì°¨ ì¸í„°ë·°', interviewFinal: 'ìµœì¢… ì¸í„°ë·°', scheduleConfirm: 'ì¼ì • í™•ì •', reference: 'ë ˆí¼ëŸ°ìŠ¤ ì²´í¬', finalNotice: 'ì²˜ìš°í˜‘ì˜', onboarding: 'ì…ì‚¬ ì•ˆë‚´', reject: 'ë¶ˆí•©ê²©' };

  /* DOM refs */
  const nameEl = document.getElementById('name');
  const positionEl = document.getElementById('position');
  const previewEl = document.getElementById('preview');
  const copyBtn = document.getElementById('copyBtn');
  const toast = document.getElementById('toast');
  const isInternEl = document.getElementById('isIntern');
  const copySubjectBtn = document.getElementById('copySubjectBtn');
  const subjectPreviewEl = document.getElementById('subjectPreview');
  const historyListEl = document.getElementById('historyList');
    const resetBtn = document.getElementById('resetBtn');

  let currentHtml = '';
  let currentSubject = '';
  let currentKey = ''; // â–¼â–¼â–¼ [ì¶”ê°€] í˜„ì¬ ì–´ë–¤ ë²„íŠ¼ì„ ëˆŒë €ëŠ”ì§€ ê¸°ì–µí•˜ëŠ” ë³€ìˆ˜

  function buildVars(){
    const normalizedUrl=(document.getElementById('taskurlSelect')?.value || '').trim();
    const propose=[readDate('p1'),readDate('p2'),readDate('p3')].filter(Boolean);
    const confirm=readDate('c1');
    // taskType ì¶”ê°€
    return { 
      name:(nameEl.value||'').trim()||'ì§€ì›ì', 
      position:(positionEl.value||'').trim()||'í¬ì§€ì…˜', 
      taskurl:normalizedUrl, 
      taskTopic:getTaskTopicByUrl(normalizedUrl), 
      taskType:getTaskTypeByUrl(normalizedUrl), 
      proposeDates:propose, 
      confirmDate:confirm, 
      isIntern:!!(isInternEl && isInternEl.checked) 
    };
  }

  function showPreview(html){ currentHtml=html; previewEl.innerHTML=html; copyBtn.disabled=!html; }
  function showToast(msg, withNote){ const note='ë‚ ì§œë‚˜ ì‹œê°„, ê¸ˆì•¡ì´ë‚˜ ë¹„ì–´ìˆëŠ” ê³µê°„ì„ ê¼­ í™•ì¸í•˜ì—¬ ë°œì†¡ ì „ ì±„ì›Œì£¼ì„¸ìš”.'; toast.innerHTML = withNote ? (escapeHtml(msg) + '<div class="note">' + escapeHtml(note) + '</div>') : escapeHtml(msg); toast.classList.add('show'); clearTimeout(toast._t); toast._t=setTimeout(()=> toast.classList.remove('show'), 3000); }

  // â–¼â–¼â–¼ [ìˆ˜ì •] renderTemplateByKey í•¨ìˆ˜ì— í˜„ì¬ ëˆ„ë¥¸ ë²„íŠ¼ í‚¤ë¥¼ ê¸°ì–µí•˜ëŠ” ê¸°ëŠ¥ ì¶”ê°€ â–¼â–¼â–¼
  function renderTemplateByKey(key){
    currentKey = key; // ì‚¬ìš©ìê°€ ëˆ„ë¥¸ ë²„íŠ¼ì˜ ì¢…ë¥˜(ì˜ˆ: 'interview1')ë¥¼ ê¸°ì–µí•©ë‹ˆë‹¤.
    const builder=templates[key];
    if(!builder){ return; }
    try{ const vars=buildVars(); const html=builder(vars, key); showPreview(html); const sb=subjectTemplates[key]; currentSubject = sb ? sb(vars) : '[Featuring] ' + (vars.position||''); subjectPreviewEl.textContent=currentSubject; copySubjectBtn.disabled=!currentSubject; }catch(err){ console.error('[í…œí”Œë¦¿ ë Œë” ì˜¤ë¥˜]', err); showPreview('<p style="margin:0;color:#b91c1c">ì„œì‹ì„ í‘œì‹œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>'); currentSubject=''; copySubjectBtn.disabled=true; subjectPreviewEl.textContent=''; }
  }

  function copySubject(){ if(!currentSubject) return; navigator.clipboard.writeText(currentSubject) .then(()=> showToast('ì œëª©ì„ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤. ë°œì†¡ ì „ ë¹ˆì¹¸ì„ í™•ì¸í•˜ì„¸ìš”.')) .catch(()=>{ const ta=document.createElement('textarea'); ta.value=currentSubject; document.body.appendChild(ta); ta.select(); try{ document.execCommand('copy'); showToast('ì œëª©ì„ í…ìŠ¤íŠ¸ë¡œ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.'); } finally{ document.body.removeChild(ta); } }); }

  // â–¼â–¼â–¼ [ìˆ˜ì •] copyHtml í•¨ìˆ˜ì— íˆìŠ¤í† ë¦¬ë¥¼ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ ì¶”ê°€ â–¼â–¼â–¼
  async function copyHtml(){
    if(!currentHtml) return;
    saveHistory(); // â˜…â˜…â˜… 'ì„œì‹ ë³µì‚¬'ë¥¼ ëˆ„ë¥´ë©´ íˆìŠ¤í† ë¦¬ë¥¼ ì €ì¥í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤! â˜…â˜…â˜…
    const blob=new Blob([currentHtml],{type:'text/html'});
    const item=new ClipboardItem({'text/html':blob});
    try{ await navigator.clipboard.write([item]); showToast('í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆìŠµë‹ˆë‹¤. Gmail ì‘ì„±ì°½ì— ë¶™ì—¬ë„£ê¸°(Ctrl/âŒ˜+V) í•˜ì„¸ìš”.', true); }catch(err){ const ta=document.createElement('textarea'); ta.value=currentHtml; document.body.appendChild(ta); ta.select(); try{ document.execCommand('copy'); showToast('HTML ë³µì‚¬ ê¶Œí•œì´ ì—†ì–´ í…ìŠ¤íŠ¸ë¡œ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.'); } catch(e){ alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'); } finally{ document.body.removeChild(ta); } }
  }

    function resetAllFields(){
  // ê¸°ë³¸ í…ìŠ¤íŠ¸ ì…ë ¥
  if (nameEl) nameEl.value = '';
  if (positionEl) positionEl.value = '';

  // ê³¼ì œ ì„ íƒ
  const taskSelect = document.getElementById('taskurlSelect');
  if (taskSelect) taskSelect.value = '';

  // ë‚ ì§œ/ì‹œê°„ ì…ë ¥ë“¤ í•œë²ˆì— ì´ˆê¸°í™”
  const ids = [
    'p1y','p1m','p1d','p1w','p1h','p1i',
    'p2y','p2m','p2d','p2w','p2h','p2i',
    'p3y','p3m','p3d','p3w','p3h','p3i',
    'c1y','c1m','c1d','c1w','c1h','c1i'
  ];
  ids.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.value = '';
  });

  // ì¸í„´ì‹­ ì²´í¬
  if (isInternEl) isInternEl.checked = false;

  // ë¯¸ë¦¬ë³´ê¸°/ë³µì‚¬ ìƒíƒœ ì´ˆê¸°í™”
  currentHtml = '';
  currentSubject = '';
  currentKey = '';

  previewEl.innerHTML = 'ì•„ì§ ì„ íƒëœ ì„œì‹ì´ ì—†ìŠµë‹ˆë‹¤.';
  copyBtn.disabled = true;
  copySubjectBtn.disabled = true;
  subjectPreviewEl.textContent = '';

  showToast('ì…ë ¥ê°’ì„ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.');
}


  /* =================== íˆìŠ¤í† ë¦¬ ê¸°ëŠ¥ ìŠ¤í¬ë¦½íŠ¸ (ìµœì¢… ìˆ˜ì •íŒ) =================== */
  const HISTORY_KEY = 'featuringRecruitHistory'; // ë¸Œë¼ìš°ì €ì˜ 'ì˜êµ¬ ê¸°ì–µ ì €ì¥ì†Œ'ì— ì‚¬ìš©í•  ì´ë¦„í‘œ
  const MAX_HISTORY = 10; // ìµœëŒ€ 10ê°œê¹Œì§€ ì €ì¥

  // 'ì„œì‹ ë³µì‚¬' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‹¤í–‰ë  í•¨ìˆ˜
  function saveHistory() {
    const vars = buildVars();
    // ì§€ì›ì ì´ë¦„ì´ ì—†ìœ¼ë©´ ì €ì¥í•˜ì§€ ì•ŠìŒ
    if (!vars.name || vars.name === 'ì§€ì›ì') return;

    // 1. í˜„ì¬ ì‹œê°„ ê¸°ë¡í•˜ê¸° (íƒ€ì„ìŠ¤íƒ¬í”„)
    const now = new Date();
    const timestamp = `${now.getFullYear()}-${pad2(now.getMonth() + 1)}-${pad2(now.getDate())} ${pad2(now.getHours())}:${pad2(now.getMinutes())}`;

    // 2. ì €ì¥í•  ë‚´ìš©(ì´ë¦„, í¬ì§€ì…˜, ì„œì‹ ì¢…ë¥˜, ì‹œê°„)ì„ í•˜ë‚˜ì˜ ë¬¶ìŒìœ¼ë¡œ ë§Œë“¤ê¸°
    const historyItem = {
      name: vars.name,
      position: vars.position,
      key: currentKey, // ì•„ê¹Œ ê¸°ì–µí•´ë‘” í˜„ì¬ ì„œì‹ ì¢…ë¥˜ (ì˜ˆ: 'interview1')
      timestamp: timestamp,
    };

    // 3. ê¸°ì¡´ì— ì €ì¥ëœ íˆìŠ¤í† ë¦¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ê¸°
    let history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');
    
    // 4. ìƒˆë¡œìš´ ë‚´ì—­ì„ ë§¨ ì•ì— ì¶”ê°€í•˜ê¸° (ìµœì‹ ìˆœ ì •ë ¬)
    history.unshift(historyItem);
    
    // 5. ë§Œì•½ 10ê°œê°€ ë„˜ì–´ê°€ë©´ ê°€ì¥ ì˜¤ë˜ëœ ë‚´ì—­ ì‚­ì œí•˜ê¸°
    if (history.length > MAX_HISTORY) {
      history = history.slice(0, MAX_HISTORY);
    }
    
    // 6. ìµœì¢… ëª©ë¡ì„ ë¸Œë¼ìš°ì €ì˜ 'ì˜êµ¬ ê¸°ì–µ ì €ì¥ì†Œ'ì— ë‹¤ì‹œ ì €ì¥í•˜ê¸°
    localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
    
    // 7. í™”ë©´ì— íˆìŠ¤í† ë¦¬ ëª©ë¡ ìƒˆë¡œê³ ì¹¨í•˜ê¸°
    loadHistory();
  }

  // í˜ì´ì§€ê°€ ì—´ë¦´ ë•Œ, ê·¸ë¦¬ê³  íˆìŠ¤í† ë¦¬ê°€ ì¶”ê°€ë  ë•Œ ì‹¤í–‰ë  í•¨ìˆ˜
  function loadHistory() {
    if (!historyListEl) return;
    let history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');
    if (history.length === 0) {
      historyListEl.innerHTML = '<li class="history-item"><div class="meta">ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</div></li>';
      return;
    }
    // ì €ì¥ëœ ëª©ë¡ì„ í™”ë©´ì— ì˜ˆì˜ê²Œ í‘œì‹œí•˜ê¸°
    historyListEl.innerHTML = history.map(item => `
      <li>
        <a class="history-item" data-name="${escapeHtml(item.name)}" data-position="${escapeHtml(item.position)}">
          <strong>${escapeHtml(item.name)} / ${escapeHtml(item.position)}</strong>
          <div class="meta">
            ${item.timestamp} / <span class="key">[${templateKeys[item.key] || item.key}]</span>
          </div>
        </a>
      </li>
    `).join('');
  }

  // íˆìŠ¤í† ë¦¬ ëª©ë¡ì˜ í•­ëª©ì„ í´ë¦­í–ˆì„ ë•Œ ì‹¤í–‰ë  í•¨ìˆ˜
  function recallHistoryItem(target) {
    const name = target.dataset.name;
    const position = target.dataset.position;
    if (name) nameEl.value = name;
    if (position) positionEl.value = position;
    showToast(`${name}ë‹˜ì˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.`);
  }

  /* ë°”ì¸ë”© (ì´ë²¤íŠ¸ ì—°ê²°) */
  document.querySelectorAll('.js-template').forEach(btn=>{ btn.addEventListener('click', ()=> renderTemplateByKey(btn.dataset.key)); });
  copyBtn.addEventListener('click', copyHtml);
  copySubjectBtn.addEventListener('click', copySubject);
  if(resetBtn) resetBtn.addEventListener('click', resetAllFields);  
  if(historyListEl) {
    historyListEl.addEventListener('click', (e) => {
      const item = e.target.closest('.history-item');
      if (item) {
        recallHistoryItem(item);
      }
    });
  }

  // í˜ì´ì§€ê°€ ì²˜ìŒ ì—´ë¦´ ë•Œ íˆìŠ¤í† ë¦¬ë¥¼ í•œë²ˆ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
  loadHistory();
</script>
</body>
</html>
